(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4jEk":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("fXoL");const o=["*"];let a=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["mat-content"]],ngContentSelectors:o,decls:1,vars:0,template:function(t,e){1&t&&(n.jc(),n.ic(0))},styles:["mat-content{flex:1 auto;height:calc(100vh - 100px);overflow-y:auto}"],encapsulation:2}),t})()},H0Zp:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("ofXK"),o=r("fXoL");let a=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},UUSl:function(t,e,r){"use strict";r.r(e),r.d(e,"SignUpModule",(function(){return j}));var n=r("mrSG"),o=r("3Pt+"),a=r("fXoL"),i=r("9ZKQ"),s=r("tyNb"),c=r("L7HW"),m=r("xyCQ"),l=r("IRyT"),b=r("dWDE"),f=r("4jEk"),u=r("kmnG"),p=r("qFsG"),d=r("ofXK"),h=r("bSwM"),g=r("bTqV"),v=r("Xa2L");function w(t,e){if(1&t&&(a.Sb(0,"mat-error"),a.Bc(1),a.Rb()),2&t){const t=a.ec();a.Ab(1),a.Dc(" ",t.errors.name.first," ")}}function y(t,e){if(1&t&&(a.Sb(0,"mat-error"),a.Bc(1),a.Rb()),2&t){const t=a.ec();a.Ab(1),a.Dc(" ",t.errors.name.last," ")}}function C(t,e){if(1&t&&(a.Sb(0,"mat-error"),a.Bc(1),a.Rb()),2&t){const t=a.ec();a.Ab(1),a.Dc(" ",t.errors.email," ")}}function S(t,e){if(1&t&&(a.Sb(0,"mat-error"),a.Bc(1),a.Rb()),2&t){const t=a.ec();a.Ab(1),a.Dc(" ",t.errors.password," ")}}function P(t,e){if(1&t&&(a.Sb(0,"mat-error"),a.Bc(1),a.Rb()),2&t){const t=a.ec();a.Ab(1),a.Fc(" ",t.errors.confirm," ",t.form.value.password!=t.form.value.confirm&&t.errors.confirm?" & ":""," ",t.form.value.password!=t.form.value.confirm?"Passwords do not match!":""," ")}}function R(t,e){1&t&&a.Nb(0,"mat-progress-spinner",19)}let I=(()=>{class t{constructor(t,e,r,n,a,i,s){this.toast=t,this.route=e,this.config=r,this.router=n,this.apps=a,this.service=i,this.formerror=s,this.form=new o.f({name:new o.f({last:new o.c("",[o.v.required]),first:new o.c("",[o.v.required])}),email:new o.c("",[o.v.email,o.v.required]),confirm:new o.c("",[o.v.required]),password:new o.c("",[o.v.required]),privacyPolicy:new o.c(!1,[o.v.required]),newsAndChanges:new o.c(!0,[o.v.required]),termsAndConditions:new o.c(!1,[o.v.required])}),this.app={},this.errors={name:{last:"",first:""},email:"",confirm:"",password:"",privacyPolicy:"",newsAndChanges:"",termsAndConditions:""},this.subscriptions={}}load(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.apps.load({filter:["icon","name","scopes"],appId:this.appId});this.loading=!1,t.ok?this.app=t.result:this.toast.show("Issue loading app!")}))}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=this.route.snapshot.queryParams,e=yield this.service.register({name:{last:this.form.value.name.last,first:this.form.value.name.first},appId:t.appId,email:this.form.value.email,confirm:this.form.value.confirm,password:this.form.value.password,privacyPolicy:this.form.value.privacyPolicy,newsAndChanges:this.form.value.newsAndChanges,termsAndConditions:this.form.value.termsAndConditions});e.ok?(this.toast.show("Sign up successfull!"),this.router.navigate(["/verify-account"],{queryParams:{email:this.form.value.email,appId:this.appId},replaceUrl:!0,queryParamsHandling:"merge"})):this.toast.show(e.error.message),this.loading=!1}))}verifyaccount(){this.router.navigate(["/verify-account"],{queryParamsHandling:"preserve"})}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.subscriptions.loaded=this.config.loaded.subscribe(t=>{if(t){const t=this.route.snapshot.queryParams;null!=t.appId&&(this.appId=t.appId,this.load())}})}ngOnDestroy(){this.subscriptions.form.unsubscribe(),this.subscriptions.loaded.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(i.a),a.Mb(s.a),a.Mb(c.a),a.Mb(s.c),a.Mb(m.a),a.Mb(l.a),a.Mb(b.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["signup-page"]],decls:54,vars:11,consts:[["alt","icon","width","100","height","100",3,"src"],[3,"formGroup","ngSubmit"],["formGroupName","name"],["appearance","outline"],["matInput","","type","text","name","first name","placeholder","first name","formControlName","first","required",""],[4,"ngIf"],["matInput","","type","text","name","last name","placeholder","last name","formControlName","last","required",""],["matInput","","type","email","name","email","placeholder","email","formControlName","email","required",""],["matInput","","type","password","name","password","placeholder","password","formControlName","password","required",""],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","confirm","required",""],["color","primary","formControlName","newsAndChanges"],["color","primary","formControlName","privacyPolicy"],["href","https://www.bitid.co.za/privacy-policy","target","_blank"],[1,"checkbox-hint"],["color","primary","formControlName","termsAndConditions"],["href","https://www.bitid.co.za/terms-and-conditions","target","_blank"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],["mode","indeterminate","diameter","30",4,"ngIf"],["type","button","mat-stroked-button","","color","primary",3,"click"],["mode","indeterminate","diameter","30"]],template:function(t,e){1&t&&(a.Sb(0,"mat-content"),a.Nb(1,"img",0),a.Sb(2,"h1"),a.Bc(3),a.Rb(),a.Sb(4,"h2"),a.Bc(5," Sign Up "),a.Rb(),a.Sb(6,"form",1),a.ac("ngSubmit",(function(){return e.form.value.password==e.form.value.confirm&&!e.form.invalid&&e.submit()})),a.Sb(7,"section",2),a.Sb(8,"mat-form-field",3),a.Sb(9,"mat-label"),a.Bc(10," First Name "),a.Rb(),a.Nb(11,"input",4),a.zc(12,w,2,1,"mat-error",5),a.Rb(),a.Sb(13,"mat-form-field",3),a.Sb(14,"mat-label"),a.Bc(15," Last Name "),a.Rb(),a.Nb(16,"input",6),a.zc(17,y,2,1,"mat-error",5),a.Rb(),a.Rb(),a.Sb(18,"mat-form-field",3),a.Sb(19,"mat-label"),a.Bc(20," Email "),a.Rb(),a.Nb(21,"input",7),a.zc(22,C,2,1,"mat-error",5),a.Rb(),a.Sb(23,"mat-form-field",3),a.Sb(24,"mat-label"),a.Bc(25," Password "),a.Rb(),a.Nb(26,"input",8),a.zc(27,S,2,1,"mat-error",5),a.Rb(),a.Sb(28,"mat-form-field",3),a.Sb(29,"mat-label"),a.Bc(30," Confirm Password "),a.Rb(),a.Nb(31,"input",9),a.zc(32,P,2,3,"mat-error",5),a.Rb(),a.Sb(33,"h2"),a.Bc(34," Terms of Service "),a.Rb(),a.Sb(35,"mat-checkbox",10),a.Bc(36," I want to be notified of news & changes "),a.Rb(),a.Sb(37,"mat-checkbox",11),a.Bc(38," I have read and agree to the "),a.Sb(39,"a",12),a.Bc(40,"Privacy Policy"),a.Rb(),a.Rb(),a.Sb(41,"mat-hint",13),a.Bc(42," Required to continue "),a.Rb(),a.Sb(43,"mat-checkbox",14),a.Bc(44," I have read and agree to the "),a.Sb(45,"a",15),a.Bc(46,"Terms & Conditions"),a.Rb(),a.Rb(),a.Sb(47,"mat-hint",13),a.Bc(48," Required to continue "),a.Rb(),a.Sb(49,"button",16),a.Bc(50),a.zc(51,R,1,0,"mat-progress-spinner",17),a.Rb(),a.Sb(52,"button",18),a.ac("click",(function(){return e.verifyaccount()})),a.Bc(53," verify account "),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.Ab(1),a.kc("src",e.app.icon?e.app.icon:"./assets/icons/icon-512x512.png",a.sc),a.Ab(2),a.Dc(" ",e.app.name?e.app.name:"Auth"," "),a.Ab(3),a.kc("formGroup",e.form),a.Ab(6),a.kc("ngIf",e.errors.name.first),a.Ab(5),a.kc("ngIf",e.errors.name.last),a.Ab(5),a.kc("ngIf",e.errors.email),a.Ab(5),a.kc("ngIf",e.errors.password),a.Ab(5),a.kc("ngIf",e.errors.confirm||e.form.value.password!=e.form.value.confirm),a.Ab(17),a.kc("disabled",e.form.invalid||!e.form.value.privacyPolicy||!e.form.value.termsAndConditions),a.Ab(1),a.Dc(" ",e.loading?"":"sign up"," "),a.Ab(1),a.kc("ngIf",e.loading))},directives:[f.a,o.w,o.p,o.g,o.h,u.c,u.g,p.a,o.b,o.o,o.e,o.u,d.l,h.a,u.f,g.a,u.b,v.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:20px 0}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2196f3}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:8px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .checkbox-hint[_ngcontent-%COMP%]{margin-left:24px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   [mat-flat-button][_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var A=r("NFeN"),M=r("MutI"),k=r("d3UM"),q=r("YUcS"),B=r("Qu3c"),N=r("/t3+"),O=r("H0Zp"),x=r("1jcm");const _=[{path:"",component:I}];let j=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[o.i,d.c,A.b,M.c,p.b,g.b,k.b,B.b,q.a,N.b,O.a,h.b,u.e,o.t,x.b,v.b,s.g.forChild(_)]]}),t})()}}]);