"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[578],{9578:(q,d,e)=>{e.r(d),e.d(d,{SignInPageModule:()=>U});var p=e(5861),a=e(3075),i=e(2340),t=e(5e3),c=e(6696),x=e(649),Z=e(8939),b=e(4602),C=e(2109),w=e(8863),u=e(7093),f=e(9224),h=e(9808),m=e(7322),v=e(8833),P=e(7423),y=e(5899);function M(r,s){1&r&&t._UZ(0,"mat-progress-bar",15)}function O(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij(" ",n.errors.email," ")}}function T(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij(" ",n.errors.password," ")}}let A=(()=>{class r{constructor(n,o,l,g,J,Y){this.route=n,this.toast=o,this.config=l,this.router=g,this.service=J,this.formerror=Y,this.app={icon:i.N.icon,name:i.N.name,privacyPolicy:i.N.privacyPolicy,termsAndConditions:i.N.termsAndConditions},this.form=new a.cw({email:new a.NI(null,[a.kI.required]),password:new a.NI(null,[a.kI.required])}),this.errors={email:"",password:""},this.loading=!1,this.observers={}}signup(){this.router.navigate(["/signup"],{queryParamsHandling:"preserve"})}submit(){var n=this;return(0,p.Z)(function*(){n.loading=!0;const o=yield n.service.signin({email:n.form.value.email,password:n.form.value.password});o.ok?n.route.snapshot.queryParams.allowaccess?(n.toast.show("Sign in successfull, Taking you to app access!"),setTimeout(()=>{n.router.navigate(["/allow-access"],{queryParamsHandling:"preserve"})},1e3)):(n.toast.show("Sign in successfull!"),n.router.navigate(["/apps"])):n.toast.show(o.error.message),n.loading=!1})()}ngOnInit(){var n=this;this.observers.form=this.form.valueChanges.subscribe(o=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.observers.loaded=this.config.loaded.subscribe(function(){var o=(0,p.Z)(function*(l){if(l){n.app.icon=i.N.icon,n.app.name=i.N.name,n.app.privacyPolicy=i.N.privacyPolicy,n.app.termsAndConditions=i.N.termsAndConditions;const g=n.route.snapshot.queryParams;void 0!==g.email&&null!=g.email&&n.form.controls.email.setValue(g.email)}});return function(l){return o.apply(this,arguments)}}())}ngOnDestroy(){var n,o;null===(n=this.observers.form)||void 0===n||n.unsubscribe(),null===(o=this.observers.loaded)||void 0===o||o.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(c.gz),t.Y36(x.k),t.Y36(Z.E),t.Y36(c.F0),t.Y36(b.B),t.Y36(C.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["signin-page"]],decls:33,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center"],["mode","indeterminate",4,"ngIf"],[1,"icon"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","email","name","email","placeholder","email","formControlName","email","required",""],[4,"ngIf"],["matInput","","type","password","name","password","placeholder","password","formControlName","password","required",""],["routerLink","/forgot-password","queryParamsHandling","preserve",1,"forgot-password"],[1,"button-footer"],["type","button","mat-stroked-button","","color","primary","routerLink","/signup","queryParamsHandling","preserve"],["type","submit","mat-flat-button","","color","primary"],[1,"row-below-card"],["href","https://www.bitid.co.za","target","_blank"],["target","_blank",3,"href"],["mode","indeterminate"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-content",0),t.TgZ(1,"mat-card"),t.YNc(2,M,1,0,"mat-progress-bar",1),t._UZ(3,"div",2),t.TgZ(4,"h1"),t._uU(5," Sign In "),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"form",3),t.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),t.TgZ(9,"mat-form-field",4),t.TgZ(10,"mat-label"),t._uU(11," Email "),t.qZA(),t._UZ(12,"input",5),t.YNc(13,O,2,1,"mat-error",6),t.qZA(),t.TgZ(14,"mat-form-field",4),t.TgZ(15,"mat-label"),t._uU(16," Password "),t.qZA(),t._UZ(17,"input",7),t.YNc(18,T,2,1,"mat-error",6),t.qZA(),t.TgZ(19,"a",8),t._uU(20," Forgot password? "),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"button",10),t._uU(23," Create Account "),t.qZA(),t.TgZ(24,"button",11),t._uU(25," Next "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",12),t.TgZ(27,"a",13),t._uU(28," Powered by biTid "),t.qZA(),t.TgZ(29,"a",14),t._uU(30," Privacy Policy "),t.qZA(),t.TgZ(31,"a",14),t._uU(32," Terms & Conditions "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",o.loading),t.xp6(1),t.Udp("background-image","url("+o.app.icon+")"),t.xp6(4),t.hij(" to continue to ",o.app.name," "),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",o.errors.email),t.xp6(5),t.Q6J("ngIf",o.errors.password),t.xp6(11),t.Q6J("href",o.app.privacyPolicy,t.LSH),t.xp6(2),t.Q6J("href",o.app.termsAndConditions,t.LSH))},directives:[w.s,u.xw,u.Wh,f.a8,h.O5,a._Y,a.JL,a.sg,m.KE,m.hX,v.Nt,a.Fj,a.JJ,a.u,a.Q7,c.yS,P.lW,c.rH,y.pW,m.TO],styles:["mat-card[_ngcontent-%COMP%]{width:calc(100% - 48px);max-width:400px}mat-card[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{top:0px;left:0px;right:0px;position:absolute;border-top-left-radius:4px;border-top-right-radius:4px}mat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:100px;height:100px;margin:8px auto;display:block;background-size:cover;background-repeat:no-repeat;background-position:center center}mat-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px!important;text-align:center}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}mat-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#3f51b5;font-weight:500;margin-bottom:18px;text-decoration:none}mat-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:hover{color:#f44336;text-decoration:underline}mat-card[_ngcontent-%COMP%]   .button-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row}mat-card[_ngcontent-%COMP%]   .button-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px)}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]{top:calc(100% + 8px);left:0px;right:0px;height:10px;display:flex;padding:0 16px;position:absolute;flex-direction:row;justify-content:space-between}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#9e9e9e;font-size:12px;font-weight:500;text-decoration:none}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#3f51b5;text-decoration:underline}"]}),r})();var I=e(2155),S=e(4274);const N=[{path:"",component:A}];let U=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[a.u5,h.ez,f.QW,v.c,P.ot,S.X,I.o9,m.lN,a.UX,y.Cv,c.Bz.forChild(N)]]}),r})()}}]);