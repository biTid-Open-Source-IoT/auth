"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[841],{5841:(j,u,n)=>{n.r(u),n.d(u,{ChangePasswordPageModule:()=>q});var f=n(5861),a=n(3075),d=n(2340),r=n(5e3),l=n(6696),C=n(649),b=n(8939),y=n(4602),Z=n(2109),x=n(8863),g=n(7093),p=n(9224),h=n(9808),v=n(5899),m=n(7322),w=n(8833),P=n(7423);function M(t,c){1&t&&r._UZ(0,"mat-progress-bar",15)}function O(t,c){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const o=r.oxw();r.xp6(1),r.hij(" ",o.errors.old," ")}}function T(t,c){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const o=r.oxw();r.xp6(1),r.hij(" ",o.errors.new," ")}}function A(t,c){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const o=r.oxw();r.xp6(1),r.hij(" ",o.errors.confirm," ")}}let I=(()=>{class t{constructor(o,e,i,s,Y,Q){this.route=o,this.toast=e,this.config=i,this.router=s,this.service=Y,this.formerror=Q,this.app={url:"",icon:d.N.icon,name:d.N.name,privacyPolicy:d.N.privacyPolicy,termsAndConditions:d.N.termsAndConditions},this.form=new a.cw({old:new a.NI(null,[a.kI.required]),new:new a.NI(null,[a.kI.required]),confirm:new a.NI(null,[a.kI.required])}),this.errors={old:"",new:"",confirm:""},this.userId="",this.loading=!1,this.observers={}}submit(){var o=this;return(0,f.Z)(function*(){o.loading=!0;const e=yield o.service.changepassword({old:o.form.value.old,new:o.form.value.new,userId:o.userId,confirm:o.form.value.confirm});o.loading=!1,e.ok?(Object.keys(o.app).includes("url")?o.router.navigate(["/allow-access"],{queryParams:{email:o.form.value.email},replaceUrl:!0,queryParamsHandling:"merge"}):o.router.navigate(["/signin"],{queryParams:{email:o.form.value.email},replaceUrl:!0}),o.toast.show("Password was changed!")):o.toast.show(e.error.message)})()}ngOnInit(){var o=this;this.observers.new=this.form.controls.new.valueChanges.subscribe(e=>{void 0!==e&&null!=e&&void 0!==this.form.value.confirm&&null!=this.form.value.confirm&&e!=this.form.value.confirm&&(this.errors.new="Passwords do not match!",this.form.controls.password.setErrors({noMatch:"Passwords do not match!"}))}),this.observers.form=this.form.valueChanges.subscribe(e=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.observers.loaded=this.config.loaded.subscribe(function(){var e=(0,f.Z)(function*(i){if(i){o.app.icon=d.N.icon,o.app.name=d.N.name,o.app.privacyPolicy=d.N.privacyPolicy,o.app.termsAndConditions=d.N.termsAndConditions;const s=o.route.snapshot.queryParams;o.userId=s.userId,void 0!==s.password&&o.form.controls.old.setValue(s.password),(""==s.userId||null==s.userId||void 0===s.userId)&&o.router.navigate(["/"])}});return function(i){return e.apply(this,arguments)}}()),this.observers.confirm=this.form.controls.confirm.valueChanges.subscribe(e=>{void 0!==e&&null!=e&&void 0!==this.form.value.new&&null!=this.form.value.new&&e!=this.form.value.new&&(this.errors.confirm="Passwords do not match!",this.form.controls.confirm.setErrors({noMatch:"Passwords do not match!"}))})}ngOnDestroy(){var o,e,i,s;null===(o=this.observers.new)||void 0===o||o.unsubscribe(),null===(e=this.observers.form)||void 0===e||e.unsubscribe(),null===(i=this.observers.loaded)||void 0===i||i.unsubscribe(),null===(s=this.observers.confirm)||void 0===s||s.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(r.Y36(l.gz),r.Y36(C.k),r.Y36(b.E),r.Y36(l.F0),r.Y36(y.B),r.Y36(Z.J))},t.\u0275cmp=r.Xpm({type:t,selectors:[["change-password-page"]],decls:34,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center"],["mode","indeterminate",4,"ngIf"],[1,"icon"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","password","name","old password","placeholder","old password","formControlName","old","required",""],[4,"ngIf"],["matInput","","type","password","name","new password","placehnewer","new password","formControlName","new","required",""],["matInput","","type","password","name","confirm password","placehconfirmer","confirm password","formControlName","confirm","required",""],[1,"button-footer"],["type","button","mat-stroked-button","","color","primary","routerLink","/signin","queryParamsHandling","preserve"],["type","submit","mat-flat-button","","color","primary"],[1,"row-below-card"],["href","https://www.bitid.co.za","target","_blank"],["target","_blank",3,"href"],["mode","indeterminate"]],template:function(o,e){1&o&&(r.TgZ(0,"mat-content",0),r.TgZ(1,"mat-card"),r.YNc(2,M,1,0,"mat-progress-bar",1),r._UZ(3,"div",2),r.TgZ(4,"h1"),r._uU(5," Change Password "),r.qZA(),r.TgZ(6,"form",3),r.NdJ("ngSubmit",function(){return!e.loading&&!e.form.invalid&&e.submit()}),r.TgZ(7,"mat-form-field",4),r.TgZ(8,"mat-label"),r._uU(9," Old Password "),r.qZA(),r._UZ(10,"input",5),r.YNc(11,O,2,1,"mat-error",6),r.qZA(),r.TgZ(12,"mat-form-field",4),r.TgZ(13,"mat-label"),r._uU(14," New Password "),r.qZA(),r._UZ(15,"input",7),r.YNc(16,T,2,1,"mat-error",6),r.qZA(),r.TgZ(17,"mat-form-field",4),r.TgZ(18,"mat-label"),r._uU(19," Confirm Password "),r.qZA(),r._UZ(20,"input",8),r.YNc(21,A,2,1,"mat-error",6),r.qZA(),r.TgZ(22,"div",9),r.TgZ(23,"button",10),r._uU(24," Back "),r.qZA(),r.TgZ(25,"button",11),r._uU(26," Next "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"div",12),r.TgZ(28,"a",13),r._uU(29," Powered by biTid "),r.qZA(),r.TgZ(30,"a",14),r._uU(31," Privacy Policy "),r.qZA(),r.TgZ(32,"a",14),r._uU(33," Terms & Conditions "),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&o&&(r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Udp("background-image","url("+e.app.icon+")"),r.xp6(3),r.Q6J("formGroup",e.form),r.xp6(5),r.Q6J("ngIf",e.errors.old),r.xp6(5),r.Q6J("ngIf",e.errors.new),r.xp6(5),r.Q6J("ngIf",e.errors.confirm),r.xp6(9),r.Q6J("href",e.app.privacyPolicy,r.LSH),r.xp6(2),r.Q6J("href",e.app.termsAndConditions,r.LSH))},directives:[x.s,g.xw,g.Wh,p.a8,h.O5,v.pW,a._Y,a.JL,a.sg,m.KE,m.hX,w.Nt,a.Fj,a.JJ,a.u,a.Q7,m.TO,P.lW,l.rH],styles:["mat-card[_ngcontent-%COMP%]{width:calc(100% - 48px);max-width:400px}mat-card[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{top:0px;left:0px;right:0px;position:absolute;border-top-left-radius:4px;border-top-right-radius:4px}mat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:100px;height:100px;margin:8px auto;display:block;background-size:cover;background-repeat:no-repeat;background-position:center center}mat-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px!important;text-align:center}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}mat-card[_ngcontent-%COMP%]   .button-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row}mat-card[_ngcontent-%COMP%]   .button-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px)}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]{top:calc(100% + 8px);left:0px;right:0px;height:10px;display:flex;padding:0 16px;position:absolute;flex-direction:row;justify-content:space-between}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#9e9e9e;font-size:12px;font-weight:500;text-decoration:none}mat-card[_ngcontent-%COMP%]   .row-below-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#3f51b5;text-decoration:underline}"]}),t})();var N=n(2155),U=n(4274);const J=[{path:"",component:I}];let q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.u5,h.ez,p.QW,w.c,P.ot,U.X,N.o9,m.lN,a.UX,v.Cv,l.Bz.forChild(J)]]}),t})()}}]);