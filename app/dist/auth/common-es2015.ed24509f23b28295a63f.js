(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1mZA":function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var o=r("ofXK"),n=r("NFeN"),i=r("+0xr"),a=r("bTqV"),s=r("d3UM"),c=r("0IaG"),l=r("/t3+"),m=r("fXoL");let d=(()=>{class t{}return t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({factory:function(e){return new(e||t)},imports:[[o.c,n.b,i.l,c.c,s.b,a.b,l.b]]}),t})()},"2xuv":function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var o=r("ofXK"),n=r("NFeN"),i=r("qFsG"),a=r("0IaG"),s=r("bTqV"),c=r("d3UM"),l=r("/t3+"),m=r("kmnG"),d=r("3Pt+"),f=r("fXoL");let u=(()=>{class t{}return t.\u0275mod=f.Mb({type:t}),t.\u0275inj=f.Lb({factory:function(e){return new(e||t)},imports:[[d.f,o.c,n.b,i.b,c.b,a.c,s.b,l.b,m.e,d.n]]}),t})()},"5ghV":function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var o=r("AytR"),n=r("3Pt+"),i=r("fXoL"),a=r("0IaG"),s=r("dWDE"),c=r("/t3+"),l=r("bTqV"),m=r("NFeN"),d=r("kmnG"),f=r("qFsG"),u=r("ofXK"),b=r("d3UM"),p=r("FKr1");function h(t,e){if(1&t&&(i.Ub(0,"mat-error"),i.yc(1),i.Tb()),2&t){const t=i.gc();i.Cb(1),i.Ac(" ",t.errors.email," ")}}function g(t,e){if(1&t&&(i.Ub(0,"mat-option",10),i.yc(1),i.Tb()),2&t){const t=e.$implicit;i.nc("value",t.value)("disabled",5==t.value),i.Cb(1),i.Ac(" ",t.title," ")}}function k(t,e){if(1&t&&(i.Ub(0,"mat-error"),i.yc(1),i.Tb()),2&t){const t=i.gc();i.Cb(1),i.Ac(" ",t.errors.role," ")}}let v=(()=>{class t{constructor(t,e){this.dialog=t,this.formerror=e,this.form=new n.d({role:new n.b(1,[n.p.required]),email:new n.b("",[n.p.required,n.p.email])}),this.roles=o.a.roles,this.errors={role:"",email:""},this.subscriptions={}}close(){this.dialog.close(!1)}submit(){this.dialog.close(this.form.value)}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(a.d),i.Ob(s.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-share"]],decls:20,vars:4,consts:[["color","primary"],[1,"spacer"],["type","button","mat-icon-button","",3,"click"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","email","name","email","placeholder","email","formControlName","email","required",""],[4,"ngIf"],["name","role","placeholder","role","formControlName","role","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],["type","submit","mat-flat-button","","color","primary"],[3,"value","disabled"]],template:function(t,e){1&t&&(i.Ub(0,"mat-toolbar",0),i.Ub(1,"div",1),i.yc(2," share "),i.Tb(),i.Ub(3,"button",2),i.cc("click",(function(){return e.close()})),i.Ub(4,"mat-icon"),i.yc(5,"close"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"form",3),i.cc("ngSubmit",(function(){return!e.form.invalid&&e.submit()})),i.Ub(7,"mat-form-field",4),i.Ub(8,"mat-label"),i.yc(9," Email "),i.Tb(),i.Pb(10,"input",5),i.xc(11,h,2,1,"mat-error",6),i.Tb(),i.Ub(12,"mat-form-field",4),i.Ub(13,"mat-label"),i.yc(14," Role "),i.Tb(),i.Ub(15,"mat-select",7),i.xc(16,g,2,3,"mat-option",8),i.Tb(),i.xc(17,k,2,1,"mat-error",6),i.Tb(),i.Ub(18,"button",9),i.yc(19," submit "),i.Tb(),i.Tb()),2&t&&(i.Cb(6),i.nc("formGroup",e.form),i.Cb(5),i.nc("ngIf",e.errors.email),i.Cb(5),i.nc("ngForOf",e.roles),i.Cb(1),i.nc("ngIf",e.errors.role))},directives:[c.a,l.a,m.a,n.q,n.j,n.e,d.c,d.g,f.a,n.a,n.i,n.c,n.o,u.l,b.a,u.k,d.b,p.k],styles:[""]}),t})()},EkoT:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var o=r("ofXK"),n=r("NFeN"),i=r("bTqV"),a=r("0IaG"),s=r("d3UM"),c=r("/t3+"),l=r("kmnG"),m=r("3Pt+"),d=r("fXoL");let f=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[m.f,o.c,n.b,s.b,a.c,i.b,c.b,l.e,m.n]]}),t})()},O5Os:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var o=r("mrSG"),n=r("XNiG"),i=r("AytR"),a=r("fXoL"),s=r("WF9o"),c=r("ofXK"),l=r("FKr1");function m(t,e){if(1&t&&a.Pb(0,"img",4),2&t){const t=a.gc();a.nc("src",t.value,a.sc)}}let d=(()=>{class t{constructor(t){this.localstorage=t,this.label="icon",this.change=new n.a}upload(){return Object(o.a)(this,void 0,void 0,(function*(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=t=>{let e=t.target.files;if(e.length>0){const t=new FormData,o=new XMLHttpRequest;for(var r=0;r<e.length;r++)t.append("uploads[]",e[r],e[r].name);o.onreadystatechange=t=>{if(4==o.readyState&&200==o.status){let t=JSON.parse(o.response),e=[i.a.drive,"/drive/files/get?fileId=",t.fileId,"&token=",t.token].join("");this.change.next(e)}};const n=[i.a.drive,"/drive/files/upload?","email","=",this.localstorage.get("email"),"&","appId","=",i.a.appId].join("");o.open("POST",n,!0),o.setRequestHeader("Authorization",this.localstorage.get("token")),o.send(t)}},t.click()}))}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(s.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-image-upload"]],inputs:{value:"value",label:"label",required:"required"},decls:7,vars:4,consts:[[1,"image-upload",3,"click"],["text-uppercase",""],["alt","image","draggable","false",3,"src",4,"ngIf"],["matRipple","",1,"ripple"],["alt","image","draggable","false",3,"src"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.cc("click",(function(){return e.upload()})),a.Ub(1,"label",1),a.yc(2),a.Ub(3,"span"),a.yc(4,"*"),a.Tb(),a.Tb(),a.xc(5,m,1,1,"img",2),a.Pb(6,"div",3),a.Tb()),2&t&&(a.Fb("required",e.required),a.Cb(2),a.Ac(" ",e.label," "),a.Cb(3),a.nc("ngIf",e.value&&!e.loading))},directives:[c.l,l.p],styles:[".image-upload[_ngcontent-%COMP%]{width:150px;height:150px;border:1px solid #e0e0e0;display:flex;position:relative;align-items:center;margin:auto auto 15px;border-radius:4px;justify-content:center}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:140px}.image-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{top:-6px;left:5px;color:#616161;padding:0 5px;position:absolute;font-size:11px;line-height:11px;background-color:#fafafa}.image-upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.image-upload[_ngcontent-%COMP%]   .ripple[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:1;position:absolute}.image-upload[_ngcontent-%COMP%]:hover{border:2px solid #000;margin-top:-1px;margin-bottom:14px}.image-upload[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2196f3!important}.image-upload.required[_ngcontent-%COMP%]{color:#f44336!important;border:2px solid #f44336;margin-top:-1px;margin-bottom:14px}"]}),t})()},Rxhi:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var o=r("ofXK"),n=r("FKr1"),i=r("fXoL");let a=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[o.c,n.q]]}),t})()},V6vf:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var o=r("3Pt+"),n=r("fXoL"),i=r("0IaG"),a=r("dWDE"),s=r("/t3+"),c=r("bTqV"),l=r("NFeN"),m=r("kmnG"),d=r("d3UM"),f=r("FKr1"),u=r("ofXK");function b(t,e){if(1&t&&(n.Ub(0,"mat-error"),n.yc(1),n.Tb()),2&t){const t=n.gc();n.Cb(1),n.Ac(" ",t.errors.confirm," ")}}let p=(()=>{class t{constructor(t,e){this.dialog=t,this.formerror=e,this.form=new o.d({confirm:new o.b(!1,[o.p.required])}),this.errors={confirm:""},this.subscriptions={}}close(){this.dialog.close(!1)}submit(){this.dialog.close(this.form.value.confirm)}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(i.d),n.Ob(a.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-unsubscribe"]],decls:18,vars:5,consts:[["color","primary"],[1,"spacer"],["type","button","mat-icon-button","",3,"click"],[3,"formGroup","ngSubmit"],["appearance","outline"],["name","confirm","placeholder","confirm","formControlName","confirm","required",""],[3,"value"],[4,"ngIf"],["type","submit","mat-flat-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(n.Ub(0,"mat-toolbar",0),n.Ub(1,"div",1),n.yc(2," unsubscribe "),n.Tb(),n.Ub(3,"button",2),n.cc("click",(function(){return e.close()})),n.Ub(4,"mat-icon"),n.yc(5,"close"),n.Tb(),n.Tb(),n.Tb(),n.Ub(6,"form",3),n.cc("ngSubmit",(function(){return!e.form.invalid&&e.submit()})),n.Ub(7,"mat-form-field",4),n.Ub(8,"mat-label"),n.yc(9," Confirm Unsubscribe "),n.Tb(),n.Ub(10,"mat-select",5),n.Ub(11,"mat-option",6),n.yc(12," Unsubscribe Now "),n.Tb(),n.Ub(13,"mat-option",6),n.yc(14," Don't Unsubscribe "),n.Tb(),n.Tb(),n.xc(15,b,2,1,"mat-error",7),n.Tb(),n.Ub(16,"button",8),n.yc(17," submit "),n.Tb(),n.Tb()),2&t&&(n.Cb(6),n.nc("formGroup",e.form),n.Cb(5),n.nc("value",!0),n.Cb(2),n.nc("value",!1),n.Cb(2),n.nc("ngIf",e.errors.confirm),n.Cb(1),n.nc("disabled",!e.form.value.confirm))},directives:[s.a,c.a,l.a,o.q,o.j,o.e,m.c,m.g,d.a,o.i,o.c,o.o,f.k,u.l,m.b],styles:[""]}),t})()},Xa2L:function(t,e,r){"use strict";r.d(e,"a",(function(){return b})),r.d(e,"b",(function(){return p}));var o=r("fXoL"),n=r("ofXK"),i=r("FKr1"),a=r("8LU1"),s=r("nLfN"),c=r("R1ws");function l(t,e){if(1&t&&(o.fc(),o.Pb(0,"circle",3)),2&t){const t=o.gc();o.wc("animation-name","mat-progress-spinner-stroke-rotate-"+t.diameter)("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),o.Db("r",t._circleRadius)}}function m(t,e){if(1&t&&(o.fc(),o.Pb(0,"circle",3)),2&t){const t=o.gc();o.wc("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),o.Db("r",t._circleRadius)}}class d{constructor(t){this._elementRef=t}}const f=Object(i.u)(d,"primary"),u=new o.r("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let b=(()=>{class t extends f{constructor(e,r,o,n,i){super(e),this._elementRef=e,this._document=o,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const a=t._diameters;a.has(o.head)||a.set(o.head,new Set([100])),this._fallbackAnimation=r.EDGE||r.TRIDENT,this._noopAnimations="NoopAnimations"===n&&!!i&&!i._forceAnimations,i&&(i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Object(a.f)(t),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Object(a.f)(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Object(a.f)(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Object(s.c)(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}get _circleRadius(){return(this.diameter-10)/2}get _viewBox(){const t=2*this._circleRadius+this.strokeWidth;return`0 0 ${t} ${t}`}get _strokeCircumference(){return 2*Math.PI*this._circleRadius}get _strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}get _circleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,r=this._diameter,o=t._diameters;let n=o.get(e);if(!n||!n.has(r)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",r+""),t.textContent=this._getAnimationText(),e.appendChild(t),n||(n=new Set,o.set(e,n)),n.add(r)}}_getAnimationText(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,`${.95*this._strokeCircumference}`).replace(/END_VALUE/g,`${.2*this._strokeCircumference}`).replace(/DIAMETER/g,`${this.diameter}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(s.a),o.Ob(n.d,8),o.Ob(c.a,8),o.Ob(u))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(o.Db("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),o.wc("width",e.diameter,"px")("height",e.diameter,"px"),o.Fb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[o.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(o.fc(),o.Ub(0,"svg",0),o.xc(1,l,1,9,"circle",1),o.xc(2,m,1,7,"circle",2),o.Tb()),2&t&&(o.wc("width",e.diameter,"px")("height",e.diameter,"px"),o.nc("ngSwitch","indeterminate"===e.mode),o.Db("viewBox",e._viewBox),o.Cb(1),o.nc("ngSwitchCase",!0),o.Cb(1),o.nc("ngSwitchCase",!1))},directives:[n.n,n.o],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),p=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.g,n.c],i.g]}),t})()},eui8:function(t,e,r){"use strict";r.d(e,"a",(function(){return U}));var o=r("mrSG"),n=r("AytR"),i=r("+0xr"),a=r("0IaG"),s=r("fXoL"),c=r("9ZKQ"),l=r("WF9o"),m=r("/t3+"),d=r("bTqV"),f=r("NFeN"),u=r("d3UM"),b=r("ofXK"),p=r("FKr1");function h(t,e){1&t&&(s.Ub(0,"th",11),s.yc(1," Email "),s.Tb())}function g(t,e){if(1&t&&(s.Ub(0,"td",12),s.yc(1),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Ac(" ",t.email," ")}}function k(t,e){1&t&&(s.Ub(0,"th",11),s.yc(1," Role "),s.Tb())}function v(t,e){if(1&t&&(s.Ub(0,"mat-option",15),s.yc(1),s.Tb()),2&t){const t=e.$implicit;s.nc("value",t.value)("disabled",t.value<t||5==t.value),s.Cb(1),s.Ac(" ",t.title," ")}}function y(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",12),s.Ub(1,"mat-select",13),s.cc("selectionChange",(function(r){s.rc(t);const o=e.$implicit;return s.gc().updatesubscriber(o.email,r)})),s.xc(2,v,2,3,"mat-option",14),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,r=s.gc();s.Cb(1),s.nc("value",t.role)("disabled",r.email==t.email||r.role<4||r.role<=t.role),s.Cb(1),s.nc("ngForOf",r.roles)}}function _(t,e){1&t&&s.Pb(0,"th",11)}function x(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",12),s.Ub(1,"button",16),s.cc("click",(function(){s.rc(t);const r=e.$implicit;return s.gc().unsubscribe(r.email)})),s.Ub(2,"mat-icon"),s.yc(3,"remove"),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,r=s.gc();s.Cb(1),s.nc("disabled",r.email==t.email||r.role<=t.role||r.role<4||5==t.role)}}function T(t,e){1&t&&s.Pb(0,"tr",17)}function w(t,e){1&t&&s.Pb(0,"tr",18)}let U=(()=>{class t{constructor(t,e,r,o){this.toast=t,this.dialog=e,this.config=r,this.localstorage=o,this.role=0,this.email=this.localstorage.get("email"),this.roles=n.a.roles,this.users=new i.k,this.columns=["email","role","remove"]}close(){this.dialog.close()}get(){return Object(o.a)(this,void 0,void 0,(function*(){this.loading=!0;let t={filter:["role","users"]};switch(this.config.type){case"app":t.appId=this.config.id;break;case"token":t.tokenId=this.config.id}const e=yield this.config.service.get(t);this.loading=!1,e.ok?(this.role=e.result.role,this.role<4?(this.close(),this.toast.error("insufficient role")):(this.role=e.result.role,this.users.data=e.result.users)):this.toast.error("issue loading users")}))}unsubscribe(t){return Object(o.a)(this,void 0,void 0,(function*(){this.loading=!0;let e={email:t};switch(this.config.type){case"app":e.appId=this.config.id;break;case"token":e.tokenId=this.config.id}const r=yield this.config.service.unsubscribe(e);if(this.loading=!1,r.ok){for(let e=0;e<this.users.data.length;e++)if(this.users.data[e].email==t){this.users.data.splice(e,1);break}this.users.data=JSON.parse(JSON.stringify(this.users.data)),this.toast.success("user was unsubscribed")}else this.toast.error("issue unsubscribing user")}))}updatesubscriber(t,e){return Object(o.a)(this,void 0,void 0,(function*(){this.loading=!0;let r={role:e.value,email:t};switch(this.config.type){case"app":r.appId=this.config.id;break;case"token":r.tokenId=this.config.id}const o=yield this.config.service.updatesubscriber(r);this.loading=!1,o.ok?this.toast.success("user role updated"):this.toast.error("issue updating user role")}))}ngOnInit(){this.get()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(a.d),s.Ob(a.a),s.Ob(l.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-subscribers"]],decls:18,vars:4,consts:[["color","primary"],[1,"spacer"],["type","button","mat-icon-button","",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","email"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","remove"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value","disabled","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["type","button","color","warn","mat-icon-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"mat-toolbar",0),s.Ub(1,"div",1),s.yc(2," subscribers "),s.Tb(),s.Ub(3,"button",2),s.cc("click",(function(){return e.close()})),s.Ub(4,"mat-icon"),s.yc(5,"close"),s.Tb(),s.Tb(),s.Tb(),s.Ub(6,"table",3),s.Sb(7,4),s.xc(8,h,2,0,"th",5),s.xc(9,g,2,1,"td",6),s.Rb(),s.Sb(10,7),s.xc(11,k,2,0,"th",5),s.xc(12,y,3,3,"td",6),s.Rb(),s.Sb(13,8),s.xc(14,_,1,0,"th",5),s.xc(15,x,4,1,"td",6),s.Rb(),s.xc(16,T,1,0,"tr",9),s.xc(17,w,1,0,"tr",10),s.Tb()),2&t&&(s.Cb(6),s.nc("dataSource",e.users),s.Cb(10),s.nc("matHeaderRowDef",e.columns)("matHeaderRowDefSticky",!0),s.Cb(1),s.nc("matRowDefColumns",e.columns))},directives:[m.a,d.a,f.a,i.j,i.c,i.e,i.b,i.g,i.i,i.d,i.a,u.a,b.k,p.k,i.f,i.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-role[_ngcontent-%COMP%]{flex:1 150px;width:150px}.mat-column-remove[_ngcontent-%COMP%]{flex:1 40px;width:40px}.mat-select-disabled[_ngcontent-%COMP%]{background:transparent!important}"]}),t})()},roMP:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var o=r("fXoL");let n=(()=>{class t{transform(t,e,r){return t.sort((t,o)=>t[e]<o[e]?r?1:-1:t[e]>o[e]?r?-1:1:0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Nb({name:"orderBy",type:t,pure:!0}),t})()}}]);