(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4+IK":function(t,e,r){"use strict";r.r(e),r.d(e,"AccountModule",(function(){return E}));var n=r("mrSG"),o=r("3Pt+"),s=r("fXoL"),i=r("9ZKQ"),a=r("BhS5"),c=r("IRyT"),u=r("4jEk"),m=r("AytR"),l=r("WF9o");let b=(()=>{class t{constructor(t,e,r){this.el=t,this.renderer=e,this.localstorage=r,this.accept="image/*",this.change=new s.o,this.element=this.el.nativeElement,this.renderer.setStyle(this.element,"margin-bottom","20px"),this.renderer.setStyle(this.element,"background-size","cover"),this.renderer.setStyle(this.element,"background-repeat","norepeat"),this.renderer.setStyle(this.element,"background-position","center center")}ngOnChanges(){this.renderer.setStyle(this.element,"background-image",["url(",this.src,")"].join(""))}ngAfterViewInit(){this.renderer.setStyle(this.element,"background-image",["url(",this.src,")"].join("")),this.renderer.listen(this.element,"click",t=>{const e=document.createElement("input");e.type="file",e.accept=this.accept,e.multiple=!1,e.onchange=t=>{const e=t.target.files;if(e.length>0){const t=new FormData,r=new XMLHttpRequest;for(let o=0;o<e.length;o++)t.append("uploads[]",e[o],e[o].name);r.onreadystatechange=t=>{if(4==r.readyState&&200==r.status){const t=JSON.parse(r.response),e=[m.a.drive,"/drive/files/get?fileId=",t.fileId,"&token=",t.token].join("");this.renderer.setStyle(this.element,"background-image",["url(",e,")"].join("")),this.change.emit(e)}};const n=[m.a.drive,"/drive/files/upload?","email","=",this.localstorage.get("email"),"&","appId","=",m.a.appId].join("");r.open("POST",n,!0),r.setRequestHeader("Authorization",this.localstorage.get("token")),r.send(t)}},e.click()})}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(s.l),s.Lb(s.F),s.Lb(l.a))},t.\u0275dir=s.Gb({type:t,selectors:[["","upload",""]],inputs:{src:["upload-src","src"],accept:["upload-accept","accept"]},outputs:{change:"upload-change"},features:[s.yb]}),t})();var d=r("FKr1"),p=r("NFeN"),f=r("kmnG"),h=r("qFsG"),g=r("ofXK"),w=r("bTqV"),v=r("tyNb"),y=r("Xa2L");function R(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.name.first," ")}}function I(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.name.last," ")}}function Q(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.username," ")}}function j(t,e){1&t&&s.Mb(0,"mat-progress-spinner",12)}let x=(()=>{class t{constructor(t,e,r){this.toast=t,this.buttons=e,this.service=r,this.form=new o.e({name:new o.e({last:new o.c(null,[o.t.required]),first:new o.c(null,[o.t.required])}),picture:new o.c(null,[o.t.required]),username:new o.c(null,[o.t.required])}),this.errors={name:{last:"",first:""},picture:"",username:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.service.update({name:{last:this.form.value.name.last,first:this.form.value.name.first},picture:this.form.value.picture,username:this.form.value.username});this.loading=!1,this.toast.show(t.ok?"Account was updated!":"Issue updating account!")}))}upload(t){return Object(n.a)(this,void 0,void 0,(function*(){this.form.controls.picture.setValue(t)}))}ngOnInit(){this.buttons.hide("add"),this.buttons.hide("close"),this.buttons.hide("filter"),this.buttons.hide("search"),this.subscriptions.user=this.service.user.subscribe(t=>{void 0!==t&&null!=t&&(this.form.controls.picture.setValue(t.picture),this.form.controls.username.setValue(t.username),void 0!==t.name&&null!=t.name&&(this.form.controls.name.controls.last.setValue(t.name.last),this.form.controls.name.controls.first.setValue(t.name.first)))})}ngOnDestroy(){this.subscriptions.user.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(i.a),s.Lb(a.a),s.Lb(c.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["account-page"]],decls:28,vars:9,consts:[[3,"formGroup","ngSubmit"],["upload","","upload-accept","image/*","matRipple","",3,"upload-src","upload-change"],["formGroupName","name"],["appearance","outline"],["matInput","","type","text","name","first name","placeholder","first name","formControlName","first","required",""],[4,"ngIf"],["matInput","","type","text","name","last name","placeholder","last name","formControlName","last","required",""],["matInput","","type","text","name","username","placeholder","username","formControlName","username","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate","diameter","30",4,"ngIf"],["type","button","mat-stroked-button","","color","primary","margin-top","","routerLink","change-password"],["type","button","mat-flat-button","","color","warn","margin-top","","routerLink","remove-account"],["mode","indeterminate","diameter","30"]],template:function(t,e){1&t&&(s.Rb(0,"mat-content"),s.Rb(1,"form",0),s.Zb("ngSubmit",(function(){return!e.form.invalid&&e.submit()})),s.Rb(2,"div",1),s.Zb("upload-change",(function(t){return e.upload(t)})),s.Rb(3,"mat-icon"),s.zc(4,"publish"),s.Qb(),s.Qb(),s.Rb(5,"section",2),s.Rb(6,"mat-form-field",3),s.Rb(7,"mat-label"),s.zc(8," First Name "),s.Qb(),s.Mb(9,"input",4),s.yc(10,R,2,1,"mat-error",5),s.Qb(),s.Rb(11,"mat-form-field",3),s.Rb(12,"mat-label"),s.zc(13," Last Name "),s.Qb(),s.Mb(14,"input",6),s.yc(15,I,2,1,"mat-error",5),s.Qb(),s.Qb(),s.Rb(16,"mat-form-field",3),s.Rb(17,"mat-label"),s.zc(18," Username "),s.Qb(),s.Mb(19,"input",7),s.yc(20,Q,2,1,"mat-error",5),s.Qb(),s.Rb(21,"button",8),s.zc(22),s.yc(23,j,1,0,"mat-progress-spinner",9),s.Qb(),s.Rb(24,"button",10),s.zc(25," change password "),s.Qb(),s.Rb(26,"button",11),s.zc(27," remove account "),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Ab(1),s.jc("formGroup",e.form),s.Ab(1),s.Db("required",!e.form.value.picture),s.jc("upload-src",e.form.value.picture),s.Ab(8),s.jc("ngIf",e.errors.name.first),s.Ab(5),s.jc("ngIf",e.errors.name.last),s.Ab(5),s.jc("ngIf",e.errors.username),s.Ab(2),s.Bc(" ",e.loading?"":"update"," "),s.Ab(1),s.jc("ngIf",e.loading))},directives:[u.a,o.u,o.o,o.f,b,d.m,p.a,o.g,f.c,f.f,h.a,o.b,o.n,o.d,o.s,g.l,w.a,v.c,f.b,y.a],styles:["[upload][_ngcontent-%COMP%]{width:100px;margin:auto;height:100px;border:2px solid transparent;display:flex;align-items:center;border-radius:100%;justify-content:center;background-color:#eee}[upload].required[_ngcontent-%COMP%]{border-color:red}mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),t})(),C=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[g.c]]}),t})();r("u47x"),r("8LU1"),r("FtGj"),r("XNiG"),r("quSY"),r("VRyK"),r("LRne"),r("7Hc7"),r("JX91"),r("eIep"),r("IzEk"),r("pLZG"),r("1G5W"),r("3E0/"),r("R0Ic"),r("+rOU");var O=r("rDax"),A=(r("nLfN"),r("vxfF"));r("cH1L");const M={provide:new s.r("mat-menu-scroll-strategy"),deps:[O.c],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let L=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},providers:[M],imports:[d.f]}),t})(),z=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},providers:[M],imports:[[g.c,d.f,d.n,O.f,L],A.b,d.f,L]}),t})();var k=r("d3UM"),P=r("/t3+"),q=r("H0Zp"),S=r("dWDE");function N(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.password," ")}}function _(t,e){1&t&&s.Mb(0,"mat-progress-spinner",7)}let F=(()=>{class t{constructor(t,e,r,n,s){this.toast=t,this.buttons=e,this.router=r,this.service=n,this.formerror=s,this.form=new o.e({password:new o.c("",[o.t.required])}),this.errors={password:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0,this.form.disable();const t=yield this.service.removeaccount({password:this.form.value.password});this.form.enable(),this.loading=!1,t.ok?(this.service.signout(),this.toast.show("Account was removed!")):this.toast.show("There was an issue removing account!")}))}ngOnInit(){this.buttons.hide("add"),this.buttons.show("close"),this.buttons.hide("filter"),this.buttons.hide("search"),this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.subscriptions.close=this.buttons.close.click.subscribe(t=>{this.router.navigate(["/account"])})}ngOnDestroy(){this.subscriptions.form.unsubscribe(),this.subscriptions.close.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(i.a),s.Lb(a.a),s.Lb(v.b),s.Lb(c.a),s.Lb(S.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["remove-account-page"]],decls:14,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"notice"],["appearance","outline"],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","password","required",""],[4,"ngIf"],["type","submit","mat-flat-button","","color","warn"],["mode","indeterminate","diameter","30",4,"ngIf"],["mode","indeterminate","diameter","30"]],template:function(t,e){1&t&&(s.Rb(0,"mat-content"),s.Rb(1,"h1"),s.zc(2," Remove Account "),s.Qb(),s.Rb(3,"form",0),s.Zb("ngSubmit",(function(){return!e.loading&&!e.form.invalid&&e.submit()})),s.Rb(4,"p",1),s.zc(5," The removal of your account will mean you can no longer sign in to the platform. This does not remove the assets you have created in the time you have had an account with us and if you wish to signup again your assets will be available to you once again! "),s.Qb(),s.Rb(6,"mat-form-field",2),s.Rb(7,"mat-label"),s.zc(8," Confirm Password "),s.Qb(),s.Mb(9,"input",3),s.yc(10,N,2,1,"mat-error",4),s.Qb(),s.Rb(11,"button",5),s.zc(12),s.yc(13,_,1,0,"mat-progress-spinner",6),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Ab(3),s.jc("formGroup",e.form),s.Ab(7),s.jc("ngIf",e.errors.password),s.Ab(2),s.Bc(" ",e.loading?"":"confirm & remove"," "),s.Ab(1),s.jc("ngIf",e.loading))},directives:[u.a,o.u,o.o,o.f,f.c,f.f,h.a,o.b,o.n,o.d,o.s,g.l,w.a,f.b,y.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-align:justify;line-height:12px;margin-bottom:15px}mat-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),t})();function G(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.old," ")}}function B(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Bc(" ",t.errors.new," ")}}function J(t,e){if(1&t&&(s.Rb(0,"mat-error"),s.zc(1),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.Cc(" ",t.errors.confirm," ",t.errors.confirm&&t.form.value.new!=t.form.value.confirm?" & ":""," ",t.form.value.new!=t.form.value.confirm?"Passwords do not match":""," ")}}function V(t,e){1&t&&s.Mb(0,"mat-progress-spinner",8)}let X=(()=>{class t{constructor(t,e,r,n,s,i){this.toast=t,this.buttons=e,this.router=r,this.service=n,this.formerror=s,this.localstorage=i,this.form=new o.e({old:new o.c("",[o.t.required]),new:new o.c("",[o.t.required]),confirm:new o.c("",[o.t.required])}),this.errors={old:"",new:"",confirm:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.service.changepassword({old:this.form.value.old,new:this.form.value.new,email:this.localstorage.get("email"),confirm:this.form.value.confirm});this.loading=!1,t.ok?(this.router.navigate(["/account"]),this.toast.show("password was changed!")):this.toast.show("there was an issue changing password!")}))}ngOnInit(){this.buttons.hide("add"),this.buttons.show("close"),this.buttons.hide("filter"),this.buttons.hide("search"),this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.subscriptions.close=this.buttons.close.click.subscribe(t=>{this.router.navigate(["/account"])})}ngOnDestroy(){this.subscriptions.form.unsubscribe(),this.subscriptions.close.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(i.a),s.Lb(a.a),s.Lb(v.b),s.Lb(c.a),s.Lb(S.a),s.Lb(l.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["change-password-page"]],decls:22,vars:6,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","password","name","old password","placeholder","old password","formControlName","old","required",""],[4,"ngIf"],["matInput","","type","password","name","new password","placeholder","new password","formControlName","new","required",""],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","confirm","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate","diameter","30",4,"ngIf"],["mode","indeterminate","diameter","30"]],template:function(t,e){1&t&&(s.Rb(0,"mat-content"),s.Rb(1,"h1"),s.zc(2," Change Password "),s.Qb(),s.Rb(3,"form",0),s.Zb("ngSubmit",(function(){return!e.loading&&!e.form.invalid&&e.form.value.new==e.form.value.confirm&&e.submit()})),s.Rb(4,"mat-form-field",1),s.Rb(5,"mat-label"),s.zc(6," Old Password "),s.Qb(),s.Mb(7,"input",2),s.yc(8,G,2,1,"mat-error",3),s.Qb(),s.Rb(9,"mat-form-field",1),s.Rb(10,"mat-label"),s.zc(11," New Password "),s.Qb(),s.Mb(12,"input",4),s.yc(13,B,2,1,"mat-error",3),s.Qb(),s.Rb(14,"mat-form-field",1),s.Rb(15,"mat-label"),s.zc(16," Confirm Password "),s.Qb(),s.Mb(17,"input",5),s.yc(18,J,2,3,"mat-error",3),s.Qb(),s.Rb(19,"button",6),s.zc(20),s.yc(21,V,1,0,"mat-progress-spinner",7),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Ab(3),s.jc("formGroup",e.form),s.Ab(5),s.jc("ngIf",e.errors.old),s.Ab(5),s.jc("ngIf",e.errors.new),s.Ab(5),s.jc("ngIf",e.errors.confirm||e.form.value.new!=e.form.value.confirm),s.Ab(2),s.Bc(" ",e.loading?"":"submit"," "),s.Ab(1),s.jc("ngIf",e.loading))},directives:[u.a,o.u,o.o,o.f,f.c,f.f,h.a,o.b,o.n,o.d,o.s,g.l,w.a,f.b,y.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),t})();r("R1ws"),r("xgIS");let Z=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[g.c,d.f],d.f]}),t})();const D=[{path:"",component:x},{path:"remove-account",component:F},{path:"change-password",component:X}];let E=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[o.h,g.c,C,p.b,z,h.b,k.a,w.b,d.n,q.a,P.b,f.e,o.r,Z,y.b,v.f.forChild(D)]]}),t})()},H0Zp:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("ofXK"),o=r("fXoL");let s=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()}}]);