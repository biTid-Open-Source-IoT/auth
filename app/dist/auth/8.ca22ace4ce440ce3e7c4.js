(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4+IK":function(e,t,r){"use strict";r.r(t),r.d(t,"AccountModule",(function(){return H}));var n=r("mrSG"),o=r("3Pt+"),s=r("fXoL"),a=r("9ZKQ"),i=r("IRyT"),c=r("4jEk"),m=r("AytR"),u=r("WF9o");let l=(()=>{class e{constructor(e,t,r){this.el=e,this.renderer=t,this.localstorage=r,this.accept="image/*",this.change=new s.o,this.element=this.el.nativeElement,this.renderer.setStyle(this.element,"margin-bottom","20px"),this.renderer.setStyle(this.element,"background-size","cover"),this.renderer.setStyle(this.element,"background-repeat","norepeat"),this.renderer.setStyle(this.element,"background-position","center center")}ngOnChanges(){this.renderer.setStyle(this.element,"background-image",["url(",this.src,")"].join(""))}ngAfterViewInit(){this.renderer.setStyle(this.element,"background-image",["url(",this.src,")"].join("")),this.renderer.listen(this.element,"click",e=>{const t=document.createElement("input");t.type="file",t.accept=this.accept,t.multiple=!1,t.onchange=e=>{let t=e.target.files;if(t.length>0){const e=new FormData,n=new XMLHttpRequest;for(var r=0;r<t.length;r++)e.append("uploads[]",t[r],t[r].name);n.onreadystatechange=e=>{if(4==n.readyState&&200==n.status){let e=JSON.parse(n.response);const t=[m.a.drive,"/drive/files/get?fileId=",e.fileId,"&token=",e.token].join("");this.renderer.setStyle(this.element,"background-image",["url(",t,")"].join("")),this.change.emit(t)}};const o=[m.a.drive,"/drive/files/upload?","email","=",this.localstorage.get("email"),"&","appId","=",m.a.appId].join("");n.open("POST",o,!0),n.setRequestHeader("Authorization",this.localstorage.get("token")),n.send(e)}},t.click()})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(s.l),s.Lb(s.F),s.Lb(u.a))},e.\u0275dir=s.Gb({type:e,selectors:[["","upload",""]],inputs:{src:["upload-src","src"],accept:["upload-accept","accept"]},outputs:{change:"upload-change"},features:[s.yb]}),e})();var b=r("FKr1"),d=r("NFeN"),f=r("kmnG"),p=r("qFsG"),h=r("ofXK"),g=r("bTqV"),w=r("tyNb"),y=r("Xa2L");function v(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.name.first," ")}}function R(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.name.last," ")}}function I(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.username," ")}}function x(e,t){1&e&&s.Mb(0,"mat-progress-spinner",12)}let A=(()=>{class e{constructor(e,t){this.toast=e,this.service=t,this.form=new o.e({name:new o.e({last:new o.c(null,[o.t.required]),first:new o.c(null,[o.t.required])}),picture:new o.c(null,[o.t.required]),username:new o.c(null,[o.t.required])}),this.errors={name:{last:"",first:""},picture:"",username:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.service.update({name:{last:this.form.value.name.last,first:this.form.value.name.first},picture:this.form.value.picture,username:this.form.value.username});this.loading=!1,this.toast.show(e.ok?"Account was updated!":"Issue updating account!")}))}upload(e){return Object(n.a)(this,void 0,void 0,(function*(){this.form.controls.picture.setValue(e)}))}ngOnInit(){this.subscriptions.user=this.service.user.subscribe(e=>{void 0!==e&&null!=e&&(this.form.controls.picture.setValue(e.picture),this.form.controls.username.setValue(e.username),void 0!==e.name&&null!=e.name&&(this.form.controls.name.controls.last.setValue(e.name.last),this.form.controls.name.controls.first.setValue(e.name.first)))})}ngOnDestroy(){this.subscriptions.user.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(a.a),s.Lb(i.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["account-page"]],decls:28,vars:7,consts:[[3,"formGroup","ngSubmit"],["upload","","upload-accept","image/*","matRipple","",3,"upload-src","upload-change"],["formGroupName","name"],["appearance","outline"],["matInput","","type","text","name","first name","placeholder","first name","formControlName","first","required",""],[4,"ngIf"],["matInput","","type","text","name","last name","placeholder","last name","formControlName","last","required",""],["matInput","","type","text","name","username","placeholder","username","formControlName","username","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate","diameter","30",4,"ngIf"],["type","button","mat-stroked-button","","color","primary","margin-top","","routerLink","change-password"],["type","button","mat-flat-button","","color","warn","margin-top","","routerLink","remove-account"],["mode","indeterminate","diameter","30"]],template:function(e,t){1&e&&(s.Rb(0,"mat-content"),s.Rb(1,"form",0),s.Zb("ngSubmit",(function(){return!t.form.invalid&&t.submit()})),s.Rb(2,"div",1),s.Zb("upload-change",(function(e){return t.upload(e)})),s.Rb(3,"mat-icon"),s.yc(4,"publish"),s.Qb(),s.Qb(),s.Rb(5,"section",2),s.Rb(6,"mat-form-field",3),s.Rb(7,"mat-label"),s.yc(8," First Name "),s.Qb(),s.Mb(9,"input",4),s.xc(10,v,2,1,"mat-error",5),s.Qb(),s.Rb(11,"mat-form-field",3),s.Rb(12,"mat-label"),s.yc(13," Last Name "),s.Qb(),s.Mb(14,"input",6),s.xc(15,R,2,1,"mat-error",5),s.Qb(),s.Qb(),s.Rb(16,"mat-form-field",3),s.Rb(17,"mat-label"),s.yc(18," Username "),s.Qb(),s.Mb(19,"input",7),s.xc(20,I,2,1,"mat-error",5),s.Qb(),s.Rb(21,"button",8),s.yc(22),s.xc(23,x,1,0,"mat-progress-spinner",9),s.Qb(),s.Rb(24,"button",10),s.yc(25," change password "),s.Qb(),s.Rb(26,"button",11),s.yc(27," remove account "),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.Ab(1),s.ic("formGroup",t.form),s.Ab(1),s.ic("upload-src",t.form.value.picture),s.Ab(8),s.ic("ngIf",t.errors.name.first),s.Ab(5),s.ic("ngIf",t.errors.name.last),s.Ab(5),s.ic("ngIf",t.errors.username),s.Ab(2),s.Ac(" ",t.loading?"":"update"," "),s.Ab(1),s.ic("ngIf",t.loading))},directives:[c.a,o.u,o.o,o.f,l,b.m,d.a,o.g,f.c,f.f,p.a,o.b,o.n,o.d,o.s,h.k,g.a,w.c,f.b,y.a],styles:["[upload][_ngcontent-%COMP%]{width:100px;margin:auto;height:100px;border-radius:100%;justify-content:center}[upload][_ngcontent-%COMP%], mat-content[_ngcontent-%COMP%]{display:flex;align-items:center}mat-content[_ngcontent-%COMP%]{flex-direction:column}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),e})(),Q=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[h.c]]}),e})();r("u47x"),r("8LU1"),r("FtGj"),r("XNiG"),r("quSY"),r("VRyK"),r("LRne"),r("7Hc7"),r("JX91"),r("eIep"),r("IzEk"),r("pLZG"),r("1G5W"),r("3E0/"),r("R0Ic"),r("+rOU");var O=r("rDax"),C=(r("nLfN"),r("vxfF"));r("cH1L");const M={provide:new s.r("mat-menu-scroll-strategy"),deps:[O.c],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let L=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[M],imports:[b.f]}),e})(),P=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[M],imports:[[h.c,b.f,b.n,O.e,L],C.b,b.f,L]}),e})();var k=r("d3UM"),q=r("/t3+"),S=r("H0Zp"),j=r("dWDE");function _(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.password," ")}}function N(e,t){1&e&&s.Mb(0,"mat-progress-spinner",7)}let F=(()=>{class e{constructor(e,t,r,n){this.toast=e,this.router=t,this.service=r,this.formerror=n,this.form=new o.e({password:new o.c("",[o.t.required])}),this.errors={password:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0,this.form.disable();const e=yield this.service.removeaccount({password:this.form.value.password});this.form.enable(),this.loading=!1,e.ok?(this.service.signout(),this.toast.show("Account was removed!")):this.toast.show("There was an issue removing account!")}))}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(e=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(a.a),s.Lb(w.b),s.Lb(i.a),s.Lb(j.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["remove-account-page"]],decls:14,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"notice"],["appearance","outline"],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","password","required",""],[4,"ngIf"],["type","submit","mat-flat-button","","color","warn"],["mode","indeterminate","diameter","30",4,"ngIf"],["mode","indeterminate","diameter","30"]],template:function(e,t){1&e&&(s.Rb(0,"mat-content"),s.Rb(1,"h1"),s.yc(2," Remove Account "),s.Qb(),s.Rb(3,"form",0),s.Zb("ngSubmit",(function(){return!t.loading&&!t.form.invalid&&t.submit()})),s.Rb(4,"p",1),s.yc(5," The removal of your account will mean you can no longer sign in to the platform. This does not remove the assets you have created in the time you have had an account with us and if you wish to signup again your assets will be available to you once again! "),s.Qb(),s.Rb(6,"mat-form-field",2),s.Rb(7,"mat-label"),s.yc(8," Confirm Password "),s.Qb(),s.Mb(9,"input",3),s.xc(10,_,2,1,"mat-error",4),s.Qb(),s.Rb(11,"button",5),s.yc(12),s.xc(13,N,1,0,"mat-progress-spinner",6),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.Ab(3),s.ic("formGroup",t.form),s.Ab(7),s.ic("ngIf",t.errors.password),s.Ab(2),s.Ac(" ",t.loading?"":"confirm & remove"," "),s.Ab(1),s.ic("ngIf",t.loading))},directives:[c.a,o.u,o.o,o.f,f.c,f.f,p.a,o.b,o.n,o.d,o.s,h.k,g.a,f.b,y.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-align:justify;line-height:12px;margin-bottom:15px}mat-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),e})();function G(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.old," ")}}function J(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Ac(" ",e.errors.new," ")}}function V(e,t){if(1&e&&(s.Rb(0,"mat-error"),s.yc(1),s.Qb()),2&e){const e=s.dc();s.Ab(1),s.Bc(" ",e.errors.confirm," ",e.errors.confirm&&e.form.value.new!=e.form.value.confirm?" & ":""," ",e.form.value.new!=e.form.value.confirm?"Passwords do not match":""," ")}}function X(e,t){1&e&&s.Mb(0,"mat-progress-spinner",8)}let Z=(()=>{class e{constructor(e,t,r,n,s){this.toast=e,this.router=t,this.service=r,this.formerror=n,this.localstorage=s,this.form=new o.e({old:new o.c("",[o.t.required]),new:new o.c("",[o.t.required]),confirm:new o.c("",[o.t.required])}),this.errors={old:"",new:"",confirm:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.service.changepassword({old:this.form.value.old,new:this.form.value.new,email:this.localstorage.get("email"),confirm:this.form.value.confirm});this.loading=!1,e.ok?(this.router.navigate(["/account"]),this.toast.show("password was changed!")):this.toast.show("there was an issue changing password!")}))}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(e=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(a.a),s.Lb(w.b),s.Lb(i.a),s.Lb(j.a),s.Lb(u.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["change-password-page"]],decls:22,vars:6,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","password","name","old password","placeholder","old password","formControlName","old","required",""],[4,"ngIf"],["matInput","","type","password","name","new password","placeholder","new password","formControlName","new","required",""],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","confirm","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate","diameter","30",4,"ngIf"],["mode","indeterminate","diameter","30"]],template:function(e,t){1&e&&(s.Rb(0,"mat-content"),s.Rb(1,"h1"),s.yc(2," Change Password "),s.Qb(),s.Rb(3,"form",0),s.Zb("ngSubmit",(function(){return!t.loading&&!t.form.invalid&&t.form.value.new==t.form.value.confirm&&t.submit()})),s.Rb(4,"mat-form-field",1),s.Rb(5,"mat-label"),s.yc(6," Old Password "),s.Qb(),s.Mb(7,"input",2),s.xc(8,G,2,1,"mat-error",3),s.Qb(),s.Rb(9,"mat-form-field",1),s.Rb(10,"mat-label"),s.yc(11," New Password "),s.Qb(),s.Mb(12,"input",4),s.xc(13,J,2,1,"mat-error",3),s.Qb(),s.Rb(14,"mat-form-field",1),s.Rb(15,"mat-label"),s.yc(16," Confirm Password "),s.Qb(),s.Mb(17,"input",5),s.xc(18,V,2,3,"mat-error",3),s.Qb(),s.Rb(19,"button",6),s.yc(20),s.xc(21,X,1,0,"mat-progress-spinner",7),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.Ab(3),s.ic("formGroup",t.form),s.Ab(5),s.ic("ngIf",t.errors.old),s.Ab(5),s.ic("ngIf",t.errors.new),s.Ab(5),s.ic("ngIf",t.errors.confirm||t.form.value.new!=t.form.value.confirm),s.Ab(2),s.Ac(" ",t.loading?"":"confirm & remove"," "),s.Ab(1),s.ic("ngIf",t.loading))},directives:[c.a,o.u,o.o,o.f,f.c,f.f,p.a,o.b,o.n,o.d,o.s,h.k,g.a,f.b,y.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin-top:20px}"]}),e})();r("R1ws"),r("xgIS");let D=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[h.c,b.f],b.f]}),e})();const E=[{path:"",component:A},{path:"remove-account",component:F},{path:"change-password",component:Z}];let H=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[o.h,h.c,Q,d.b,P,p.b,k.a,g.b,b.n,S.a,q.b,f.e,o.r,D,y.b,w.f.forChild(E)]]}),e})()},H0Zp:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("ofXK"),o=r("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})()}}]);