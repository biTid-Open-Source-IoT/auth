(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"1Vod":function(t,i,o){"use strict";o.r(i),o.d(i,"AllowAccessModule",(function(){return L}));var n=o("mrSG"),e=o("Ovx2"),s=o("3Pt+"),c=o("fXoL"),a=o("0IaG"),r=o("9ZKQ"),l=o("dWDE"),d=o("IRyT"),u=o("/t3+"),h=o("kmnG"),b=o("4jEk"),p=o("bSwM"),m=o("ZRfb"),g=o("bTqV"),f=o("ofXK"),v=o("Xa2L");function x(t,i){1&t&&c.Nb(0,"mat-progress-spinner",10)}let y=(()=>{class t{constructor(t,i,o,n){this.dialog=t,this.toast=i,this.formerror=o,this.service=n,this.form=new s.f({privacyPolicy:new s.c(!1,[s.v.required]),termsAndConditions:new s.c(!1,[s.v.required])}),this.errors={privacyPolicy:"",termsAndConditions:""},this.subscriptions={}}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0,this.form.disable();const t=yield this.service.update(this.form.value);this.form.enable(),this.loading=!1,t.ok?this.dialog.close(!0):this.toast.show(t.error.message)}))}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(c.Mb(a.d),c.Mb(r.a),c.Mb(l.a),c.Mb(d.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["accept-dialog"]],decls:25,vars:4,consts:[[1,"container",3,"formGroup","ngSubmit"],["color","primary","formControlName","privacyPolicy"],["href","https://www.bitid.co.za/privacy-policy","target","_blank"],[1,"checkbox-hint"],["color","primary","formControlName","termsAndConditions"],["href","https://www.bitid.co.za/terms-and-conditions","target","_blank"],["type","submit",2,"display","none"],["button",""],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mode","indeterminate","diameter","30",4,"ngIf"],["mode","indeterminate","diameter","30"]],template:function(t,i){if(1&t){const t=c.Tb();c.Sb(0,"mat-toolbar"),c.Sb(1,"mat-label"),c.Cc(2," Accept Changes "),c.Rb(),c.Rb(),c.Sb(3,"mat-content"),c.Sb(4,"form",0),c.ac("ngSubmit",(function(){return!i.form.invalid&&i.submit()})),c.Sb(5,"p"),c.Cc(6," There have been some changes to our Privacy Policy & Terms & Conditions "),c.Rb(),c.Sb(7,"mat-checkbox",1),c.Cc(8," I have read and agree to the "),c.Sb(9,"a",2),c.Cc(10,"Privacy Policy"),c.Rb(),c.Rb(),c.Sb(11,"mat-hint",3),c.Cc(12," Required to continue "),c.Rb(),c.Sb(13,"mat-checkbox",4),c.Cc(14," I have read and agree to the "),c.Sb(15,"a",5),c.Cc(16,"Terms & Conditions"),c.Rb(),c.Rb(),c.Sb(17,"mat-hint",3),c.Cc(18," Required to continue "),c.Rb(),c.Nb(19,"button",6,7),c.Rb(),c.Rb(),c.Sb(21,"mat-footer"),c.Sb(22,"button",8),c.ac("click",(function(){return c.rc(t),c.pc(20).click()})),c.Cc(23),c.Ac(24,x,1,0,"mat-progress-spinner",9),c.Rb(),c.Rb()}2&t&&(c.Ab(4),c.kc("formGroup",i.form),c.Ab(18),c.kc("disabled",i.form.invalid||!i.form.value.privacyPolicy||!i.form.value.termsAndConditions),c.Ab(1),c.Ec(" ",i.loading?"":"confirm"," "),c.Ab(1),c.kc("ngIf",i.loading))},directives:[u.a,h.g,b.a,s.w,s.p,s.g,p.a,s.o,s.e,h.f,m.a,g.a,f.l,v.a],styles:[".accept-dialog .mat-dialog-container{top:0;left:0;right:0;bottom:0;z-index:5000;padding:0!important;position:fixed;border-radius:0}.accept-dialog .mat-dialog-container accept-dialog{height:100vh;display:flex;position:relative;flex-direction:column}.accept-dialog .mat-dialog-container mat-toolbar{display:flex;font-size:14px;margin-bottom:5px;justify-content:center}.accept-dialog .mat-dialog-container button{width:100%;margin:auto;max-width:400px}.accept-dialog .mat-dialog-container form{max-width:400px}"],encapsulation:2}),t})();var w=o("xyCQ"),k=o("tyNb"),C=o("RgeU"),I=o("L7HW"),A=o("BhS5"),S=o("WF9o"),R=o("fASB");function O(t,i){if(1&t&&c.Nb(0,"img",7),2&t){const t=c.ec();c.kc("src",t.app.icon,c.tc)}}function M(t,i){if(1&t&&(c.Sb(0,"h1"),c.Cc(1),c.Rb()),2&t){const t=c.ec();c.Ab(1),c.Ec(" ",t.app.name," ")}}function P(t,i){1&t&&c.Nb(0,"mat-progress-spinner",8)}let j=(()=>{class t{constructor(t,i,o,n,e,s,c,a,r,l){this.apps=t,this.toast=i,this.route=o,this.tokens=n,this.router=e,this.dialog=s,this.config=c,this.account=a,this.buttons=r,this.localstorage=l,this.app={},this.subscriptions={}}load(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.apps.load({filter:["icon","name","scopes"],appId:this.appId});this.loading=!1,t.ok?this.app=new e.a(t.result):this.toast.show("Issue loading app!")}))}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.tokens.generate({appId:this.appId,expiry:new Date((new Date).setFullYear((new Date).getFullYear()+1)),description:this.app.name+" (LOGIN)"});t.ok?(this.url=[this.returl,"?","email=",this.localstorage.get("email"),"&","tokenId=",t.result.tokenId].join(""),window.open(this.url,"_parent")):this.toast.show(t.error.message),this.loading=!1}))}accept(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.dialog.open(y,{panelClass:"accept-dialog",disableClose:!0});yield t.afterClosed().subscribe(t=>Object(n.a)(this,void 0,void 0,(function*(){t&&window.open(this.url,"_parent")})))}))}switch(){return Object(n.a)(this,void 0,void 0,(function*(){this.localstorage.clear(),this.router.navigate(["/signin"],{queryParams:{appId:this.appId,returl:this.returl,allowaccess:!0}})}))}process(){return Object(n.a)(this,void 0,void 0,(function*(){(yield this.account.validate())?this.load():this.router.navigate(["/signin"],{queryParams:{appId:this.appId,returl:this.returl,allowaccess:!0}})}))}ngOnInit(){this.buttons.hide("add"),this.buttons.hide("close"),this.buttons.hide("filter"),this.buttons.hide("search"),this.subscriptions.config=this.config.loaded.subscribe(t=>{if(t){const t=this.route.snapshot.queryParams;this.appId=t.appId,this.returl=t.returl,this.process()}})}ngOnDestroy(){var t;null===(t=this.subscriptions.config)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(c.Mb(w.a),c.Mb(r.a),c.Mb(k.a),c.Mb(C.a),c.Mb(k.c),c.Mb(a.b),c.Mb(I.a),c.Mb(d.a),c.Mb(A.a),c.Mb(S.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["allow-access-page"]],decls:13,vars:4,consts:[[1,"image-container"],["alt","icon","width","100","height","100",3,"src",4,"ngIf"],[4,"ngIf"],["type","button","mat-flat-button","","color","primary",3,"click"],["mode","indeterminate","diameter","30",4,"ngIf"],["type","button","mat-stroked-button","","color","primary",3,"click"],["type","button","mat-stroked-button","","color","primary","back-button",""],["alt","icon","width","100","height","100",3,"src"],["mode","indeterminate","diameter","30"]],template:function(t,i){1&t&&(c.Sb(0,"mat-content"),c.Sb(1,"div",0),c.Ac(2,O,1,1,"img",1),c.Rb(),c.Ac(3,M,2,1,"h1",2),c.Sb(4,"p"),c.Cc(5," This application is requesting access to your account for authentication! "),c.Rb(),c.Sb(6,"button",3),c.ac("click",(function(){return i.submit()})),c.Cc(7),c.Ac(8,P,1,0,"mat-progress-spinner",4),c.Rb(),c.Sb(9,"button",5),c.ac("click",(function(){return i.switch()})),c.Cc(10," Switch Account "),c.Rb(),c.Sb(11,"button",6),c.Cc(12," back "),c.Rb(),c.Rb()),2&t&&(c.Ab(2),c.kc("ngIf",i.app.icon),c.Ab(1),c.kc("ngIf",i.app.name),c.Ab(4),c.Ec(" ",i.loading?"":"Grant Access"," "),c.Ab(1),c.kc("ngIf",i.loading))},directives:[b.a,f.l,g.a,R.a,v.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center;margin-bottom:20px}mat-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:100px;height:100px;margin:20px 0}mat-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:20px}"]}),t})();var N=o("NFeN"),G=o("qFsG"),_=o("tVzd"),q=o("d3UM"),z=o("H0Zp"),X=o("pBNG");const K=[{path:"",component:j}];let L=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(i){return new(i||t)},imports:[[s.i,f.c,N.b,G.b,_.a,g.b,q.b,u.b,z.a,X.a,u.b,p.b,h.e,s.t,v.b,k.g.forChild(K)]]}),t})()},H0Zp:function(t,i,o){"use strict";o.d(i,"a",(function(){return s}));var n=o("ofXK"),e=o("fXoL");let s=(()=>{class t{}return t.\u0275mod=e.Kb({type:t}),t.\u0275inj=e.Jb({factory:function(i){return new(i||t)},imports:[[n.c]]}),t})()},Ovx2:function(t,i,o){"use strict";o.d(i,"a",(function(){return e}));var n=o("UxUN");class e{constructor(t){this.icons={icon72x72:null,icon96x96:null,icon128x128:null,icon144x144:null,icon152x152:null,icon192x192:null,icon384x384:null,icon512x512:null},this.role=0,this.users=[],this.theme={},this.google={},this.scopes=[],this.domains=[],void 0!==t&&null!=t&&(Array.isArray(t.users)&&(this.users=t.users.map(t=>new n.a(t))),Array.isArray(t.scopes)&&(this.scopes=t.scopes),Array.isArray(t.domains)&&(this.domains=t.domains),void 0!==t.icons&&null!=t.icons&&(void 0!==t.icons.icon72x72&&null!=t.icons.icon72x72&&(this.icons.icon72x72=t.icons.icon72x72),void 0!==t.icons.icon96x96&&null!=t.icons.icon96x96&&(this.icons.icon96x96=t.icons.icon96x96),void 0!==t.icons.icon128x128&&null!=t.icons.icon128x128&&(this.icons.icon128x128=t.icons.icon128x128),void 0!==t.icons.icon144x144&&null!=t.icons.icon144x144&&(this.icons.icon144x144=t.icons.icon144x144),void 0!==t.icons.icon152x152&&null!=t.icons.icon152x152&&(this.icons.icon152x152=t.icons.icon152x152),void 0!==t.icons.icon192x192&&null!=t.icons.icon192x192&&(this.icons.icon192x192=t.icons.icon192x192),void 0!==t.icons.icon384x384&&null!=t.icons.icon384x384&&(this.icons.icon384x384=t.icons.icon384x384),void 0!==t.icons.icon512x512&&null!=t.icons.icon512x512&&(this.icons.icon512x512=t.icons.icon512x512)),void 0!==t.theme&&null!=t.theme&&(void 0!==t.theme.color&&null!=t.theme.color&&(this.theme.color=t.theme.color),void 0!==t.theme.background&&null!=t.theme.background&&(this.theme.background=t.theme.background)),void 0!==t.google&&null!=t.google&&(void 0!==t.google.database&&null!=t.google.database&&(this.google.database=t.google.database),void 0!==t.google.credentials&&null!=t.google.credentials&&(this.google.credentials=t.google.credentials)),void 0!==t.url&&null!=t.url&&(this.url=t.url),void 0!==t.role&&null!=t.role&&(this.role=t.role),void 0!==t.icon&&null!=t.icon&&(this.icon=t.icon),void 0!==t.name&&null!=t.name&&(this.name=t.name),void 0!==t.appId&&null!=t.appId&&(this.appId=t.appId),void 0!==t.private&&null!=t.private&&(this.private=t.private),void 0!==t.secret&&null!=t.secret&&(this.secret=t.secret),void 0!==t.favicon&&null!=t.favicon&&(this.favicon=t.favicon),void 0!==t.organizationOnly&&null!=t.organizationOnly&&(this.organizationOnly=t.organizationOnly))}}},UxUN:function(t,i,o){"use strict";o.d(i,"a",(function(){return n}));class n{constructor(t){void 0!==t.role&&null!=t.role&&(this.role=t.role),void 0!==t.email&&null!=t.email&&(this.email=t.email)}}},ZRfb:function(t,i,o){"use strict";o.d(i,"a",(function(){return s}));var n=o("fXoL");const e=["*"];let s=(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["mat-footer"]],ngContentSelectors:e,decls:1,vars:0,template:function(t,i){1&t&&(n.jc(),n.ic(0))},styles:["mat-footer{flex:1 auto;color:rgba(0,0,0,.87);height:56px;display:flex;padding:0 16px;min-height:56px;max-height:56px;background:#f5f5f5;align-items:center}"],encapsulation:2}),t})()},tVzd:function(t,i,o){"use strict";o.d(i,"a",(function(){return s}));var n=o("ofXK"),e=o("fXoL");let s=(()=>{class t{}return t.\u0275mod=e.Kb({type:t}),t.\u0275inj=e.Jb({factory:function(i){return new(i||t)},imports:[[n.c]]}),t})()}}]);