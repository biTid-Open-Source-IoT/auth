(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{H0Zp:function(t,r,e){"use strict";e.d(r,"a",(function(){return a}));var n=e("ofXK"),o=e("fXoL");let a=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(r){return new(r||t)},imports:[[n.c]]}),t})()},UUSl:function(t,r,e){"use strict";e.r(r),e.d(r,"SignUpModule",(function(){return U}));var n=e("mrSG"),o=e("AytR"),a=e("3Pt+"),i=e("fXoL"),s=e("9ZKQ"),c=e("tyNb"),m=e("L7HW"),b=e("xyCQ"),l=e("IRyT"),f=e("dWDE"),p=e("4jEk"),d=e("kmnG"),u=e("qFsG"),h=e("ofXK"),g=e("bSwM"),v=e("bTqV"),C=e("Xa2L");function w(t,r){if(1&t&&(i.Sb(0,"mat-error"),i.Cc(1),i.Rb()),2&t){const t=i.ec();i.Ab(1),i.Ec(" ",t.errors.name.first," ")}}function y(t,r){if(1&t&&(i.Sb(0,"mat-error"),i.Cc(1),i.Rb()),2&t){const t=i.ec();i.Ab(1),i.Ec(" ",t.errors.name.last," ")}}function S(t,r){if(1&t&&(i.Sb(0,"mat-error"),i.Cc(1),i.Rb()),2&t){const t=i.ec();i.Ab(1),i.Ec(" ",t.errors.email," ")}}function A(t,r){if(1&t&&(i.Sb(0,"mat-error"),i.Cc(1),i.Rb()),2&t){const t=i.ec();i.Ab(1),i.Ec(" ",t.errors.password," ")}}function P(t,r){if(1&t&&(i.Sb(0,"mat-error"),i.Cc(1),i.Rb()),2&t){const t=i.ec();i.Ab(1),i.Gc(" ",t.errors.confirm," ",t.form.value.password!=t.form.value.confirm&&t.errors.confirm?" & ":""," ",t.form.value.password!=t.form.value.confirm?"Passwords do not match!":""," ")}}function R(t,r){1&t&&i.Nb(0,"mat-progress-spinner",19)}let I=(()=>{class t{constructor(t,r,e,n,o,i,s){this.toast=t,this.route=r,this.config=e,this.router=n,this.apps=o,this.service=i,this.formerror=s,this.form=new a.f({name:new a.f({last:new a.c("",[a.v.required]),first:new a.c("",[a.v.required])}),email:new a.c("",[a.v.email,a.v.required]),confirm:new a.c("",[a.v.required]),password:new a.c("",[a.v.required]),privacyPolicy:new a.c(!1,[a.v.required]),newsAndChanges:new a.c(!0,[a.v.required]),termsAndConditions:new a.c(!1,[a.v.required])}),this.app={},this.errors={name:{last:"",first:""},email:"",confirm:"",password:"",privacyPolicy:"",newsAndChanges:"",termsAndConditions:""},this.subscriptions={}}load(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.apps.load({filter:["icon","name","scopes"],appId:this.appId});this.loading=!1,t.ok?this.app=t.result:this.toast.show("Issue loading app!")}))}submit(){return Object(n.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=this.route.snapshot.queryParams,r=yield this.service.register({name:{last:this.form.value.name.last,first:this.form.value.name.first},appId:t.appId,email:this.form.value.email,confirm:this.form.value.confirm,password:this.form.value.password,privacyPolicy:this.form.value.privacyPolicy,newsAndChanges:this.form.value.newsAndChanges,termsAndConditions:this.form.value.termsAndConditions});r.ok?(this.toast.show("Sign up successfull!"),this.router.navigate(["/verify-account"],{queryParams:{email:this.form.value.email,appId:this.appId},replaceUrl:!0,queryParamsHandling:"merge"})):this.toast.show(r.error.message),this.loading=!1}))}verifyaccount(){this.router.navigate(["/verify-account"],{queryParamsHandling:"preserve"})}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.subscriptions.loaded=this.config.loaded.subscribe(t=>{if(t){const t=this.route.snapshot.queryParams;void 0!==t.appId&&null!=t.appId?(this.appId=t.appId,this.load()):this.app.icon=o.a.icon}})}ngOnDestroy(){this.subscriptions.form.unsubscribe(),this.subscriptions.loaded.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(i.Mb(s.a),i.Mb(c.a),i.Mb(m.a),i.Mb(c.c),i.Mb(b.a),i.Mb(l.a),i.Mb(f.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["signup-page"]],decls:54,vars:11,consts:[["alt","icon","width","100","height","100",3,"src"],[3,"formGroup","ngSubmit"],["formGroupName","name"],["appearance","outline"],["matInput","","type","text","name","first name","placeholder","first name","formControlName","first","required",""],[4,"ngIf"],["matInput","","type","text","name","last name","placeholder","last name","formControlName","last","required",""],["matInput","","type","email","name","email","placeholder","email","formControlName","email","required",""],["matInput","","type","password","name","password","placeholder","password","formControlName","password","required",""],["matInput","","type","password","name","confirm password","placeholder","confirm password","formControlName","confirm","required",""],["color","primary","formControlName","newsAndChanges"],["color","primary","formControlName","privacyPolicy"],["href","https://www.bitid.co.za/privacy-policy","target","_blank"],[1,"checkbox-hint"],["color","primary","formControlName","termsAndConditions"],["href","https://www.bitid.co.za/terms-and-conditions","target","_blank"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],["mode","indeterminate","diameter","30",4,"ngIf"],["type","button","mat-stroked-button","","color","primary",3,"click"],["mode","indeterminate","diameter","30"]],template:function(t,r){1&t&&(i.Sb(0,"mat-content"),i.Nb(1,"img",0),i.Sb(2,"h1"),i.Cc(3),i.Rb(),i.Sb(4,"h2"),i.Cc(5," Sign Up "),i.Rb(),i.Sb(6,"form",1),i.ac("ngSubmit",(function(){return r.form.value.password==r.form.value.confirm&&!r.form.invalid&&r.submit()})),i.Sb(7,"section",2),i.Sb(8,"mat-form-field",3),i.Sb(9,"mat-label"),i.Cc(10," First Name "),i.Rb(),i.Nb(11,"input",4),i.Ac(12,w,2,1,"mat-error",5),i.Rb(),i.Sb(13,"mat-form-field",3),i.Sb(14,"mat-label"),i.Cc(15," Last Name "),i.Rb(),i.Nb(16,"input",6),i.Ac(17,y,2,1,"mat-error",5),i.Rb(),i.Rb(),i.Sb(18,"mat-form-field",3),i.Sb(19,"mat-label"),i.Cc(20," Email "),i.Rb(),i.Nb(21,"input",7),i.Ac(22,S,2,1,"mat-error",5),i.Rb(),i.Sb(23,"mat-form-field",3),i.Sb(24,"mat-label"),i.Cc(25," Password "),i.Rb(),i.Nb(26,"input",8),i.Ac(27,A,2,1,"mat-error",5),i.Rb(),i.Sb(28,"mat-form-field",3),i.Sb(29,"mat-label"),i.Cc(30," Confirm Password "),i.Rb(),i.Nb(31,"input",9),i.Ac(32,P,2,3,"mat-error",5),i.Rb(),i.Sb(33,"h2"),i.Cc(34," Terms of Service "),i.Rb(),i.Sb(35,"mat-checkbox",10),i.Cc(36," I want to be notified of news & changes "),i.Rb(),i.Sb(37,"mat-checkbox",11),i.Cc(38," I have read and agree to the "),i.Sb(39,"a",12),i.Cc(40,"Privacy Policy"),i.Rb(),i.Rb(),i.Sb(41,"mat-hint",13),i.Cc(42," Required to continue "),i.Rb(),i.Sb(43,"mat-checkbox",14),i.Cc(44," I have read and agree to the "),i.Sb(45,"a",15),i.Cc(46,"Terms & Conditions"),i.Rb(),i.Rb(),i.Sb(47,"mat-hint",13),i.Cc(48," Required to continue "),i.Rb(),i.Sb(49,"button",16),i.Cc(50),i.Ac(51,R,1,0,"mat-progress-spinner",17),i.Rb(),i.Sb(52,"button",18),i.ac("click",(function(){return r.verifyaccount()})),i.Cc(53," verify account "),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Ab(1),i.kc("src",r.app.icon,i.tc),i.Ab(2),i.Ec(" ",r.app.name?r.app.name:"Auth"," "),i.Ab(3),i.kc("formGroup",r.form),i.Ab(6),i.kc("ngIf",r.errors.name.first),i.Ab(5),i.kc("ngIf",r.errors.name.last),i.Ab(5),i.kc("ngIf",r.errors.email),i.Ab(5),i.kc("ngIf",r.errors.password),i.Ab(5),i.kc("ngIf",r.errors.confirm||r.form.value.password!=r.form.value.confirm),i.Ab(17),i.kc("disabled",r.form.invalid||!r.form.value.privacyPolicy||!r.form.value.termsAndConditions),i.Ab(1),i.Ec(" ",r.loading?"":"sign up"," "),i.Ab(1),i.kc("ngIf",r.loading))},directives:[p.a,a.w,a.p,a.g,a.h,d.c,d.g,u.a,a.b,a.o,a.e,a.u,h.l,g.a,d.f,v.a,d.b,C.a],styles:["mat-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}mat-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:20px 0}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2196f3}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:8px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .checkbox-hint[_ngcontent-%COMP%]{margin-left:24px}mat-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   [mat-flat-button][_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var M=e("NFeN"),k=e("MutI"),q=e("d3UM"),N=e("YUcS"),O=e("Qu3c"),_=e("/t3+"),x=e("H0Zp"),E=e("1jcm");const G=[{path:"",component:I}];let U=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(r){return new(r||t)},imports:[[a.i,h.c,M.b,k.c,u.b,v.b,q.b,O.b,N.a,_.b,x.a,g.b,d.e,a.t,E.b,C.b,c.g.forChild(G)]]}),t})()}}]);