"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[983],{7983:(zt,w,n)=>{n.r(w),n.d(w,{AppsPageModule:()=>Ht});var m=n(5861),h=n(4847),u=n(4999),x=n(7046),i=n(3075),q=n(8966),t=n(5e3),D=n(2109),v=n(4594),A=n(7423),T=n(5245),f=n(9808),b=n(8863),d=n(7322),I=n(4107),N=n(508),C=n(4080),_=n(5899);function M(r,s){1&r&&t._UZ(0,"mat-progress-bar",11)}function H(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.private," ")}}let S=(()=>{class r{constructor(e,o,a){this.dialog=e,this.config=o,this.formerror=a,this.form=new i.cw({private:new i.NI([])}),this.errors={private:""},this.loading=!1,this.observers={}}load(){var e=this;return(0,m.Z)(function*(){e.loading=!0,void 0!==e.config.private&&null!=e.config.private&&e.form.controls.private.setValue(e.config.private),e.loading=!1})()}close(){var e=this;return(0,m.Z)(function*(){e.dialog.close(!1)})()}submit(){var e=this;return(0,m.Z)(function*(){e.dialog.close(e.form.value)})()}ngOnInit(){this.observers.form=this.form.valueChanges.subscribe(e=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.load()}ngOnDestroy(){var e;null===(e=this.observers.form)||void 0===e||e.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(q.so),t.Y36(q.WI),t.Y36(D.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["apps-filter-dialog"]],decls:23,vars:5,consts:[["for","filter apps"],["mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["name","private","formControlName","private","multiple",""],[3,"value"],[4,"ngIf"],["type","submit",2,"display","none"],["button",""],["type","button","color","primary","mat-flat-button","",3,"click"],["mode","indeterminate"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-toolbar"),t.TgZ(1,"label",0),t._uU(2," Filter Apps "),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.close()}),t.TgZ(4,"mat-icon"),t._uU(5," close "),t.qZA(),t.qZA(),t.qZA(),t.YNc(6,M,1,0,"mat-progress-bar",2),t.TgZ(7,"mat-content"),t.TgZ(8,"form",3),t.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),t.TgZ(9,"mat-form-field",4),t.TgZ(10,"mat-label"),t._uU(11," Access Mode "),t.qZA(),t.TgZ(12,"mat-select",5),t.TgZ(13,"mat-option",6),t._uU(14," Public "),t.qZA(),t.TgZ(15,"mat-option",6),t._uU(16," Private "),t.qZA(),t.qZA(),t.YNc(17,H,2,1,"mat-error",7),t.qZA(),t._UZ(18,"button",8,9),t.qZA(),t.qZA(),t.TgZ(20,"mat-footer"),t.TgZ(21,"button",10),t.NdJ("click",function(){return t.CHM(a),t.MAs(19).click()}),t._uU(22," Apply "),t.qZA(),t.qZA()}2&e&&(t.xp6(6),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("value",!1),t.xp6(2),t.Q6J("value",!0),t.xp6(2),t.Q6J("ngIf",o.errors.private))},directives:[v.Ye,A.lW,T.Hw,f.O5,b.s,i._Y,i.JL,i.sg,d.KE,d.hX,I.gD,i.JJ,i.u,N.ey,C.A,_.pW,d.TO],styles:[".filter-dialog{width:500px!important}.filter-dialog .mat-dialog-container{padding:0!important}@media screen and (max-width: 600px){.filter-dialog .mat-dialog-container{top:0px;left:0px;right:0px;bottom:0px;z-index:5000;position:fixed;border-radius:0}}\n"],encapsulation:2}),r})();var P=n(3065),J=n(649),Y=n(8939),V=n(7563),Z=n(6696),j=n(8188),z=n(5167),Q=n(5358),G=n(7635),R=n(5277),L=n(3322),y=n(4449),g=n(6688);function $(r,s){1&r&&t._UZ(0,"mat-progress-bar",17)}function B(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"mat-chip",20),t.NdJ("removed",function(){const l=t.CHM(e).$implicit;return t.oxw(2).unfilter("private",l)}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",21),t._uU(6," cancel "),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit;t.xp6(2),t.hij(" ",e?"vpn_lock":"public"," "),t.xp6(2),t.hij(" ",e?"Private":"Public"," ")}}function X(r,s){if(1&r&&(t.TgZ(0,"mat-chip-list",18),t.YNc(1,B,7,2,"mat-chip",19),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filter.private)}}function W(r,s){1&r&&(t.TgZ(0,"th",22),t._uU(1," Icon "),t.qZA())}function K(r,s){if(1&r&&(t.TgZ(0,"td",23),t._UZ(1,"img",24),t.qZA()),2&r){const e=s.$implicit;t.xp6(1),t.Q6J("src",e.icon,t.LSH)("alt",e.name)}}function tt(r,s){1&r&&(t.TgZ(0,"th",25),t._uU(1," Name "),t.qZA())}function et(r,s){if(1&r&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function ot(r,s){1&r&&(t.TgZ(0,"th",25),t._uU(1," Access Mode "),t.qZA())}function rt(r,s){if(1&r&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.xp6(1),t.hij(" ",e.private?"Private":"Public"," ")}}function at(r,s){1&r&&t._UZ(0,"tr",26)}function it(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().options(l)}),t.qZA()}}function nt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"mat-list-item",28),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().options(l)}),t._UZ(1,"img",29),t.TgZ(2,"mat-label"),t.TgZ(3,"h3"),t._uU(4),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit;t.xp6(1),t.Q6J("src",e.icon,t.LSH)("alt",e.name),t.xp6(3),t.hij(" ",e.name," ")}}const F=function(){return["icon","name","private"]},st=function(){return{mode:"add"}};let lt=(()=>{class r{constructor(e,o,a,l,c,p,St,Vt,jt){this.toast=e,this.config=o,this.dialog=a,this.sheet=l,this.router=c,this.filters=p,this.confirm=St,this.service=Vt,this.localstorage=jt,this.sort=new h.YE,this.apps=new u.by,this.filter=this.filters.get({private:[]}),this.columns=["icon","name","private","options"],this.loading=!1,this.observers={}}list(){var e=this;return(0,m.Z)(function*(){e.loading=!0;const o=yield e.service.list({filter:["icon","role","name","appId","private"],private:e.filter.private});e.apps.data=o.ok?o.result.map(a=>new x.g(a)):[],e.loading=!1})()}unfilter(e,o){this.filter[e]=this.filter[e].filter(a=>a!=o),this.filters.update(this.filter),this.list()}options(e){var o=this;return(0,m.Z)(function*(){var a;o.sheet.show({role:e.role,title:e.name,options:[{icon:"edit",title:"Edit",handler:(a=(0,m.Z)(function*(){o.router.navigate(["/apps","editor"],{queryParams:{mode:"update",appId:e.appId}})}),function(){return a.apply(this,arguments)}),disabled:[0,1]},{icon:"content_copy",title:"Copy",handler:function(){var a=(0,m.Z)(function*(){o.router.navigate(["/apps","editor"],{queryParams:{mode:"copy",appId:e.appId}})});return function(){return a.apply(this,arguments)}}(),disabled:[0,1]},{icon:"people",title:"Subscribers",handler:function(){var a=(0,m.Z)(function*(){o.router.navigate(["/subscribers","app",e.appId])});return function(){return a.apply(this,arguments)}}(),disabled:[0,1,2,3]},{icon:"remove",title:"Unubscribe",danger:!0,handler:function(){var a=(0,m.Z)(function*(){var l;o.confirm.show({message:"Are you sure you want to unsubscribe from "+e.name+"?",handler:(l=(0,m.Z)(function*(){o.loading=!0;const c=yield o.service.unsubscribe({id:o.localstorage.get("userId"),type:"user",appId:e.appId});if(c.ok){for(let p=0;p<o.apps.data.length;p++)if(o.apps.data[p].appId==e.appId){o.apps.data.splice(p,1),o.toast.show("You were unsubscribed!");break}o.apps.data=o.apps.data.map(p=>new x.g(p))}else o.toast.show(c.error.message);o.loading=!1}),function(){return l.apply(this,arguments)})})});return function(){return a.apply(this,arguments)}}(),disabled:[0,5]},{icon:"delete",title:"Delete",danger:!0,handler:function(){var a=(0,m.Z)(function*(){var l;o.confirm.show({message:"Are you sure you want to delete "+e.name+"?",handler:(l=(0,m.Z)(function*(){o.loading=!0;const c=yield o.service.delete({appId:e.appId});if(c.ok){for(let p=0;p<o.apps.data.length;p++)if(o.apps.data[p].appId==e.appId){o.apps.data.splice(p,1),o.toast.show("App was removed!");break}o.apps.data=o.apps.data.map(p=>new x.g(p))}else o.toast.show(c.error.message);o.loading=!1}),function(){return l.apply(this,arguments)})})});return function(){return a.apply(this,arguments)}}(),disabled:[0,1,2,3,4]}]})})()}OpenFilter(){var e=this;return(0,m.Z)(function*(){yield(yield e.dialog.open(S,{data:e.filter,panelClass:"filter-dialog"})).afterClosed().subscribe(function(){var a=(0,m.Z)(function*(l){l&&(Object.keys(l).map(c=>{e.filter[c]=l[c]}),e.filters.update(e.filter),e.list())});return function(l){return a.apply(this,arguments)}}())})()}ngOnInit(){var o,e=this;this.apps.sort=this.sort,this.apps.sort.active="name",this.apps.sort.direction="asc",this.observers.loaded=this.config.loaded.subscribe(function(){var a=(0,m.Z)(function*(l){l&&(yield e.list())});return function(l){return a.apply(this,arguments)}}()),this.observers.search=null===(o=this.search)||void 0===o?void 0:o.change.subscribe(a=>{this.apps.filter=a})}ngOnDestroy(){var e,o;null===(e=this.observers.loaded)||void 0===e||e.unsubscribe(),null===(o=this.observers.search)||void 0===o||o.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J.k),t.Y36(Y.E),t.Y36(q.uw),t.Y36(V.I),t.Y36(Z.F0),t.Y36(j.q),t.Y36(z.z),t.Y36(Q.b),t.Y36(G.n))},r.\u0275cmp=t.Xpm({type:r,selectors:[["apps-page"]],viewQuery:function(e,o){if(1&e&&(t.Gf(h.YE,7),t.Gf(P.g,7)),2&e){let a;t.iGM(a=t.CRH())&&(o.sort=a.first),t.iGM(a=t.CRH())&&(o.search=a.first)}},decls:28,vars:11,consts:[["for","apps"],["placeholder","Filter apps.."],["mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["class","filterbar",4,"ngIf"],["mat-table","","fxShow","","fxHide.xs","true","matSort","",3,"dataSource"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","private"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["fxHide","","fxShow.xs","true"],["lines","full","matRipple","",3,"click",4,"ngFor","ngForOf"],["mat-fab","","color","primary","routerLink","editor",1,"add-floating-button",3,"queryParams"],["mode","indeterminate"],[1,"filterbar"],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],["mat-header-cell",""],["mat-cell",""],["width","40","height","40","draggable","false",3,"src","alt"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row","",3,"click"],["lines","full","matRipple","",3,"click"],["slot","start","width","40","height","40","draggable","false",3,"src","alt"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-toolbar"),t._UZ(1,"mat-menu-button"),t.TgZ(2,"label",0),t._uU(3," Apps "),t.qZA(),t._UZ(4,"search",1),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.OpenFilter()}),t.TgZ(6,"mat-icon"),t._uU(7," filter_list "),t.qZA(),t.qZA(),t.qZA(),t.YNc(8,$,1,0,"mat-progress-bar",3),t.TgZ(9,"mat-content"),t.YNc(10,X,2,1,"mat-chip-list",4),t.TgZ(11,"table",5),t.ynx(12,6),t.YNc(13,W,2,0,"th",7),t.YNc(14,K,2,2,"td",8),t.BQk(),t.ynx(15,9),t.YNc(16,tt,2,0,"th",10),t.YNc(17,et,2,1,"td",8),t.BQk(),t.ynx(18,11),t.YNc(19,ot,2,0,"th",10),t.YNc(20,rt,2,1,"td",8),t.BQk(),t.YNc(21,at,1,0,"tr",12),t.YNc(22,it,1,0,"tr",13),t.qZA(),t.TgZ(23,"mat-list",14),t.YNc(24,nt,5,3,"mat-list-item",15),t.qZA(),t.qZA(),t.TgZ(25,"button",16),t.TgZ(26,"mat-icon"),t._uU(27," add "),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("ngIf",o.filter.private.length>0),t.xp6(1),t.Q6J("dataSource",o.apps),t.xp6(10),t.Q6J("matHeaderRowDef",t.DdM(8,F))("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(9,F)),t.xp6(2),t.Q6J("ngForOf",o.apps.data),t.xp6(1),t.Q6J("queryParams",t.DdM(10,st)))},directives:[v.Ye,R.v,P.g,A.lW,T.Hw,f.O5,b.s,u.BZ,L.b8,h.YE,u.w1,u.fO,u.Dz,u.as,u.nj,y.i$,f.sg,Z.rH,_.pW,g.qn,g.HS,d.hX,g.qH,u.ge,u.ev,h.nU,u.XQ,u.Gk,y.Tg],styles:[".mat-column-icon[_ngcontent-%COMP%]{width:60px}.mat-column-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:4px}.mat-column-private[_ngcontent-%COMP%]{width:250px}.mat-column-options[_ngcontent-%COMP%]{width:40px;padding-right:16px!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row}"]}),r})();var O=n(1159),mt=n(5628),ct=n(6907),pt=n(7756),U=n(7093),ut=n(5601),E=n(8833),k=n(1303),dt=n(4533),gt=n(4014),ft=n(3711);function ht(r,s){1&r&&t._UZ(0,"mat-progress-bar",40)}function Zt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.name," ")}}function xt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.secret," ")}}function vt(r,s){if(1&r&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e.url),t.xp6(1),t.hij(" ",e.url," ")}}function At(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.scopes," ")}}function Tt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.url," ")}}function _t(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"mat-chip",41),t.NdJ("removed",function(){const l=t.CHM(e).$implicit;return t.oxw().remove(l)}),t._uU(1),t.TgZ(2,"mat-icon",42),t._uU(3," cancel "),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit;t.xp6(1),t.hij(" ",e," ")}}function qt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.theme.color," ")}}function bt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.theme.background," ")}}function It(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.google.database," ")}}function yt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.google.credentials," ")}}function Ut(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.private," ")}}function wt(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.organizationOnly," ")}}const Nt=function(r){return{url:r}};let Ct=(()=>{class r{constructor(e,o,a,l,c,p){this.toast=e,this.route=o,this.scopes=a,this.config=l,this.router=c,this.service=p,this.form=new i.cw({icons:new i.cw({icon72x72:new i.NI(null,[i.kI.required]),icon96x96:new i.NI(null,[i.kI.required]),icon128x128:new i.NI(null,[i.kI.required]),icon144x144:new i.NI(null,[i.kI.required]),icon152x152:new i.NI(null,[i.kI.required]),icon192x192:new i.NI(null,[i.kI.required]),icon384x384:new i.NI(null,[i.kI.required]),icon512x512:new i.NI(null,[i.kI.required])}),theme:new i.cw({color:new i.NI(null,[i.kI.required]),background:new i.NI(null,[i.kI.required])}),google:new i.cw({database:new i.NI(null,[i.kI.required]),credentials:new i.NI(null,[i.kI.required])}),url:new i.NI(null,[i.kI.required]),icon:new i.NI(null,[i.kI.required]),name:new i.NI(null,[i.kI.required]),secret:new i.NI(null,[i.kI.required]),scopes:new i.NI([],[i.kI.required]),domains:new i.NI([],[i.kI.required]),private:new i.NI(null,[i.kI.required]),favicon:new i.NI(null,[i.kI.required]),organizationOnly:new i.NI(null,[i.kI.required])}),this.mode="unset",this.errors={icons:{icon72x72:"",icon96x96:"",icon128x128:"",icon144x144:"",icon152x152:"",icon192x192:"",icon384x384:"",icon512x512:""},theme:{color:"",background:""},google:{database:"",credentials:""},url:"",icon:"",name:"",secret:"",scopes:"",domains:"",private:"",favicon:"",organizationOnly:""},this.loading=!1,this.observers={},this.keycodes=[O.K5,O.OC]}get(){var e=this;return(0,m.Z)(function*(){e.loading=!0;const o=yield e.service.get({filter:["url","role","icon","name","icons","theme","secret","google","scopes","domains","private","favicon","organizationOnly"],appId:e.appId});if(o.ok){const a=new x.g(o.result);a.role>1?(e.form.controls.url.setValue(a.url),e.form.controls.icon.setValue(a.icon),e.form.controls.name.setValue(a.name),e.form.controls.secret.setValue(a.secret),e.form.controls.scopes.setValue(a.scopes),e.form.controls.domains.setValue(a.domains),e.form.controls.private.setValue(a.private),e.form.controls.favicon.setValue(a.favicon),e.form.controls.organizationOnly.setValue(a.organizationOnly),e.form.controls.icons.controls.icon72x72.setValue(a.icons.icon72x72),e.form.controls.icons.controls.icon96x96.setValue(a.icons.icon96x96),e.form.controls.icons.controls.icon128x128.setValue(a.icons.icon128x128),e.form.controls.icons.controls.icon144x144.setValue(a.icons.icon144x144),e.form.controls.icons.controls.icon152x152.setValue(a.icons.icon152x152),e.form.controls.icons.controls.icon192x192.setValue(a.icons.icon192x192),e.form.controls.icons.controls.icon384x384.setValue(a.icons.icon384x384),e.form.controls.icons.controls.icon512x512.setValue(a.icons.icon512x512),e.form.controls.theme.controls.color.setValue(a.theme.color),e.form.controls.theme.controls.background.setValue(a.theme.background),e.form.controls.google.controls.database.setValue(a.google.database),e.form.controls.google.controls.credentials.setValue(JSON.stringify(a.google.credentials,null,4))):(e.toast.show("You have insufficient rights to edit this app!"),e.router.navigate(["/apps"]))}else e.toast.show(o.error.message),e.router.navigate(["/apps"]);e.loading=!1})()}load(){var e=this;return(0,m.Z)(function*(){e.loading=!0;const o=yield e.scopes.list({filter:["url"]});o.ok?e.scopes.data=o.result.map(a=>new mt.s(a)):(e.scopes.data=[],e.toast.show(o.error.message)),e.loading=!1})()}submit(){var e=this;return(0,m.Z)(function*(){e.loading=!0;let o=e.mode;"copy"==o&&(o="add",delete e.appId);const a=yield e.service[o]({theme:{color:e.form.value.theme.color,background:e.form.value.theme.background},google:{database:e.form.value.google.database,credentials:e.form.value.google.credentials},url:e.form.value.url,icon:e.form.value.icon,name:e.form.value.name,appId:e.appId,icons:e.form.value.icons,secret:e.form.value.secret,scopes:e.form.value.scopes,private:e.form.value.private,domains:e.form.value.domains,favicon:e.form.value.favicon,organizationOnly:e.form.value.organizationOnly});a.ok?e.router.navigate(["/apps"]):e.toast.show(a.error.message),e.loading=!1})()}upload(e){var o=this;return(0,m.Z)(function*(){o.form.controls.icon.setValue(e)})()}remove(e){var o=this;return(0,m.Z)(function*(){o.form.value.domains.splice(o.form.value.domains.indexOf(e),1)})()}add(e){var o=this;return(0,m.Z)(function*(){const a=o.form.value.domains;void 0!==e.value&&null!=e.value&&""!=e.value&&!a.includes(e.value.trim())&&(e.input.value="",a.push(e.value.trim()),o.form.controls.domains.setValue(a))})()}ngOnInit(){var e=this;this.observers.loaded=this.config.loaded.subscribe(function(){var o=(0,m.Z)(function*(a){if(a){const l=e.route.snapshot.queryParams;e.mode=l.mode,e.appId=l.appId,yield e.load(),"add"!=e.mode&&(yield e.get())}});return function(a){return o.apply(this,arguments)}}())}ngOnDestroy(){var e;null===(e=this.observers.loaded)||void 0===e||e.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J.k),t.Y36(Z.gz),t.Y36(ct.k),t.Y36(Y.E),t.Y36(Z.F0),t.Y36(Q.b))},r.\u0275cmp=t.Xpm({type:r,selectors:[["apps-editor-page"]],decls:143,vars:79,consts:[["for","app editor"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center flex-start"],["fxFlex","60","fxFlex.lg","70","fxFlex.md","80","fxFlex.sm","90","fxFlex.xs","100",3,"formGroup","ngSubmit"],["formControlName","icon"],["appearance","outline"],["matInput","","type","text","name","name","placeholder","name","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","text","name","secret","placeholder","secret","formControlName","secret","required",""],["name","scopes","placeholder","scope(s)","formControlName","scopes","required","","multiple",""],["placeholderLabel","Filter scopes...","noEntriesFoundLabel","There are no scopes matching your query!"],["filter",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","name","url","placeholder","main url","formControlName","url","required",""],["aria-label","domain selection"],["domainlist",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New domain...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["appearance","outline","formGroupName","theme"],["matInput","","type","color","name","color","placeholder","font color","formControlName","color","required",""],["matInput","","type","color","name","background","placeholder","background color","formControlName","background","required",""],["appearance","outline","formGroupName","google"],["matInput","","type","text","name","database","placeholder","database","formControlName","database","required",""],["matInput","","cdkTextareaAutosize","","name","credentials","placeholder","credentials","formControlName","credentials","required",""],["name","private","formControlName","private","required",""],[3,"value"],["name","organizationOnly","formControlName","organizationOnly","required",""],["formControlName","favicon",3,"required","accept","min-width","max-width","min-height","max-height"],["formGroupName","icons"],["formControlName","icon72x72",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon96x96",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon128x128",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon144x144",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon152x152",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon192x192",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon384x384",3,"required","min-width","max-width","min-height","max-height"],["formControlName","icon512x512",3,"required","min-width","max-width","min-height","max-height"],["type","submit",2,"display","none"],["button",""],["type","button","mat-flat-button","","color","primary",3,"click"],["mode","indeterminate"],[3,"removed"],["matChipRemove",""]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-toolbar"),t._UZ(1,"mat-back-button"),t.TgZ(2,"label",0),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,ht,1,0,"mat-progress-bar",1),t.TgZ(5,"mat-content",2),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),t.TgZ(7,"mat-file",4),t.TgZ(8,"mat-label"),t._uU(9," Icon "),t.TgZ(10,"span"),t._uU(11,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14," Name "),t.qZA(),t._UZ(15,"input",6),t.YNc(16,Zt,2,1,"mat-error",7),t.qZA(),t.TgZ(17,"section"),t.TgZ(18,"mat-form-field",5),t.TgZ(19,"mat-label"),t._uU(20," Secret "),t.qZA(),t._UZ(21,"input",8),t.YNc(22,xt,2,1,"mat-error",7),t.qZA(),t.TgZ(23,"mat-form-field",5),t.TgZ(24,"mat-label"),t._uU(25," Scope(s) "),t.qZA(),t.TgZ(26,"mat-select",9),t.TgZ(27,"mat-option"),t._UZ(28,"ngx-mat-select-search",10,11),t.qZA(),t.YNc(30,vt,2,2,"mat-option",12),t.ALo(31,"filterBy"),t.ALo(32,"orderBy"),t.qZA(),t.YNc(33,At,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(34,"mat-form-field",5),t.TgZ(35,"mat-label"),t._uU(36," Main Url "),t.qZA(),t._UZ(37,"input",13),t.YNc(38,Tt,2,1,"mat-error",7),t.qZA(),t.TgZ(39,"mat-form-field",5),t.TgZ(40,"mat-label"),t._uU(41," Domains "),t.qZA(),t.TgZ(42,"mat-chip-list",14,15),t.YNc(44,_t,4,1,"mat-chip",16),t.TgZ(45,"input",17),t.NdJ("matChipInputTokenEnd",function(c){return o.add(c)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"h2"),t._uU(47," Theme "),t.qZA(),t.TgZ(48,"section"),t.TgZ(49,"mat-form-field",18),t.TgZ(50,"mat-label"),t._uU(51," Font Color "),t.qZA(),t._UZ(52,"input",19),t.YNc(53,qt,2,1,"mat-error",7),t.qZA(),t.TgZ(54,"mat-form-field",18),t.TgZ(55,"mat-label"),t._uU(56," Background Color "),t.qZA(),t._UZ(57,"input",20),t.YNc(58,bt,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(59,"h2"),t._uU(60," Google "),t.qZA(),t.TgZ(61,"mat-form-field",21),t.TgZ(62,"mat-label"),t._uU(63," Database "),t.qZA(),t._UZ(64,"input",22),t.YNc(65,It,2,1,"mat-error",7),t.qZA(),t.TgZ(66,"mat-form-field",21),t.TgZ(67,"mat-label"),t._uU(68," Credentials "),t.qZA(),t._UZ(69,"textarea",23),t.YNc(70,yt,2,1,"mat-error",7),t.qZA(),t.TgZ(71,"h2"),t._uU(72," Access Control "),t.qZA(),t.TgZ(73,"section"),t.TgZ(74,"mat-form-field",5),t.TgZ(75,"mat-label"),t._uU(76," Access Mode "),t.qZA(),t.TgZ(77,"mat-select",24),t.TgZ(78,"mat-option",25),t._uU(79," Public "),t.qZA(),t.TgZ(80,"mat-option",25),t._uU(81," Private "),t.qZA(),t.qZA(),t.YNc(82,Ut,2,1,"mat-error",7),t.qZA(),t.TgZ(83,"mat-form-field",5),t.TgZ(84,"mat-label"),t._uU(85," Sharing Rules "),t.qZA(),t.TgZ(86,"mat-select",26),t.TgZ(87,"mat-option",25),t._uU(88," Share To Anyone "),t.qZA(),t.TgZ(89,"mat-option",25),t._uU(90," In Organization Only "),t.qZA(),t.qZA(),t.YNc(91,wt,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(92,"mat-file",27),t.TgZ(93,"mat-label"),t._uU(94," Favicon (256x256) "),t.TgZ(95,"span"),t._uU(96,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",28),t.TgZ(98,"mat-file",29),t.TgZ(99,"mat-label"),t._uU(100," Icon (72x72) "),t.TgZ(101,"span"),t._uU(102,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(103,"mat-file",30),t.TgZ(104,"mat-label"),t._uU(105," Icon (96x96) "),t.TgZ(106,"span"),t._uU(107,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(108,"mat-file",31),t.TgZ(109,"mat-label"),t._uU(110," Icon (128x128) "),t.TgZ(111,"span"),t._uU(112,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"mat-file",32),t.TgZ(114,"mat-label"),t._uU(115," Icon (144x144) "),t.TgZ(116,"span"),t._uU(117,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"mat-file",33),t.TgZ(119,"mat-label"),t._uU(120," Icon (152x152) "),t.TgZ(121,"span"),t._uU(122,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(123,"mat-file",34),t.TgZ(124,"mat-label"),t._uU(125," Icon (192x192) "),t.TgZ(126,"span"),t._uU(127,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"mat-file",35),t.TgZ(129,"mat-label"),t._uU(130," Icon (384x384) "),t.TgZ(131,"span"),t._uU(132,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(133,"mat-file",36),t.TgZ(134,"mat-label"),t._uU(135," Icon (512x512) "),t.TgZ(136,"span"),t._uU(137,"*"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(138,"button",37,38),t.qZA(),t.qZA(),t.TgZ(140,"mat-footer"),t.TgZ(141,"button",39),t.NdJ("click",function(){return t.CHM(a),t.MAs(139).click()}),t._uU(142," Submit "),t.qZA(),t.qZA()}if(2&e){const a=t.MAs(29),l=t.MAs(43);t.xp6(3),t.lnq(" ","add"==o.mode?"Create App":""," ","copy"==o.mode?"Copy App":""," ","update"==o.mode?"Edit App":""," "),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.errors.name),t.xp6(6),t.Q6J("ngIf",o.errors.secret),t.xp6(8),t.Q6J("ngForOf",t.xi3(31,71,t.xi3(32,74,o.scopes.data,"url"),t.VKq(77,Nt,a.value))),t.xp6(3),t.Q6J("ngIf",o.errors.scopes),t.xp6(5),t.Q6J("ngIf",o.errors.url),t.xp6(6),t.Q6J("ngForOf",o.form.value.domains),t.xp6(1),t.Q6J("matChipInputFor",l)("matChipInputSeparatorKeyCodes",o.keycodes)("matChipInputAddOnBlur",!0),t.xp6(8),t.Q6J("ngIf",o.errors.theme.color),t.xp6(5),t.Q6J("ngIf",o.errors.theme.background),t.xp6(7),t.Q6J("ngIf",o.errors.google.database),t.xp6(5),t.Q6J("ngIf",o.errors.google.credentials),t.xp6(8),t.Q6J("value",!1),t.xp6(2),t.Q6J("value",!0),t.xp6(2),t.Q6J("ngIf",o.errors.private),t.xp6(5),t.Q6J("value",0),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("ngIf",o.errors.organizationOnly),t.xp6(1),t.Q6J("required",!0)("accept","image/x-icon")("min-width",256)("max-width",256)("min-height",256)("max-height",256),t.xp6(6),t.Q6J("required",!0)("required",!0)("min-width",72)("max-width",72)("min-height",72)("max-height",72),t.xp6(5),t.Q6J("required",!0)("min-width",96)("max-width",96)("min-height",96)("max-height",96),t.xp6(5),t.Q6J("required",!0)("min-width",128)("max-width",128)("min-height",128)("max-height",128),t.xp6(5),t.Q6J("required",!0)("min-width",144)("max-width",144)("min-height",144)("max-height",144),t.xp6(5),t.Q6J("required",!0)("min-width",152)("max-width",152)("min-height",152)("max-height",152),t.xp6(5),t.Q6J("required",!0)("min-width",192)("max-width",192)("min-height",192)("max-height",192),t.xp6(5),t.Q6J("required",!0)("min-width",384)("max-width",384)("min-height",384)("max-height",384),t.xp6(5),t.Q6J("required",!0)("min-width",512)("max-width",512)("min-height",512)("max-height",512)}},directives:[v.Ye,pt.x,f.O5,b.s,U.xw,U.Wh,i._Y,i.JL,U.yH,i.sg,ut.u,i.JJ,i.u,d.hX,d.KE,E.Nt,i.Fj,i.Q7,I.gD,N.ey,k.nu,f.sg,g.qn,g.oH,i.x0,dt.IC,C.A,A.lW,_.pW,d.TO,g.HS,T.Hw,g.qH],pipes:[gt.g,ft.T],styles:[""]}),r})();var Pt=n(949),Jt=n(8248),Yt=n(2217),Qt=n(7375),Ft=n(2155),Ot=n(2604),Et=n(4274),kt=n(5612),Dt=n(5896);const Mt=[{path:"",component:lt},{path:"editor",component:Ct}];let Ht=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[i.u5,f.ez,Pt.t,y.ie,T.Ps,Jt._,h.JX,E.c,g.Hi,u.p0,Yt.l,A.ot,I.LD,Qt.M,Ft.o9,Ot.o,Et.X,v.g0,d.lN,Dt.n,kt.G,i.UX,_.Cv,k.Co,Z.Bz.forChild(Mt)]]}),r})()}}]);